<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="sandbox allow-same-origin allow-modals allow-scripts; img-src 'self' https://i.postimg.cc https://images.unsplash.com">
    <title>Dark Thailand - Надёжный шоп</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #1a1a1a 0%, #2b0000 100%);
            color: #ff4444;
            overflow-x: hidden;
        }
        .container { max-width: 600px; margin: 0 auto; padding: 15px; position: relative; }
        .header { text-align: center; padding: 15px 0; background-color: #2b2b2b; color: #ff4444; margin-bottom: 20px; border-radius: 5px; border: 2px solid #ff4444; box-shadow: 0 0 10px rgba(255, 68, 68, 0.5); }
        .logo { font-size: 48px; animation: textPulse 2s infinite; display: inline-block; }
        @keyframes textPulse { 0% { transform: scale(1); text-shadow: 0 0 5px #ff4444; } 50% { transform: scale(1.05); text-shadow: 0 0 20px #ff4444, 0 0 30px #ff6666; } 100% { transform: scale(1); text-shadow: 0 0 5px #ff4444; } }
        .header-text { font-size: 16px; margin-top: 5px; animation: textFlicker 3s infinite; }
        @keyframes textFlicker { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
        .nav { display: flex; justify-content: space-between; margin-bottom: 20px; }
        .nav-button { background-color: #ff4444; color: #000; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-size: 16px; animation: neonPulse 1.5s infinite; }
        .profile-button { background-color: #ff4444; color: #000; border: none; padding: 0; border-radius: 5px; cursor: pointer; font-size: 26px; width: 60px; height: 40px; line-height: 40px; text-align: center; animation: neonPulse 1.5s infinite; }
        @keyframes neonPulse { 0% { box-shadow: 0 0 5px #ff4444; } 50% { box-shadow: 0 0 20px #ff4444; } 100% { box-shadow: 0 0 5px #ff4444; } }
        .catalog-menu, .profile-menu, .vacancy-menu, .mail-menu { display: none; background-color: #333; border-radius: 5px; padding: 15px; box-shadow: 0 0 15px rgba(255, 68, 68, 0.3); }
        .city-filter { margin-bottom: 15px; }
        .city-filter select, .district-filter select { width: 100%; padding: 10px; background-color: #2b2b2b; color: #ff4444; border: 1px solid #ff4444; border-radius: 5px; font-size: 16px; margin-bottom: 10px; }
        .tabs { display: flex; flex-wrap: wrap; margin-bottom: 15px; }
        .tab { flex: 1; text-align: center; padding: 10px; background-color: #2b2b2b; cursor: pointer; margin: 5px; border-radius: 5px; transition: all 0.3s; }
        .tab:hover { background-color: #ff6666; }
        .tab.active { background-color: #ff4444; color: #000; box-shadow: 0 0 10px #ff4444; }
        .tab-content { display: none; }
        .product-card { background-color: #333; border-radius: 5px; padding: 15px; margin-bottom: 15px; box-shadow: 0 2px 5px rgba(255, 68, 68, 0.3); transition: transform 0.2s; }
        .product-card:hover { transform: scale(1.02); }
        .product-card h3 { margin-top: 0; color: #ff6666; cursor: pointer; }
        .product-card p { margin: 5px 0; }
        .product-image { width: 100%; max-height: 150px; object-fit: cover; border-radius: 5px; margin-bottom: 10px; }
        .price { font-weight: bold; color: #ff9999; }
        .crypto-price { font-size: 12px; color: #ff6666; }
        .buy-button, .preorder-button { background-color: #ff4444; color: #000; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; margin: 5px 0; width: 100%; transition: all 0.3s; }
        .preorder-button { background-color: #ff6666; }
        .buy-button:hover, .preorder-button:hover { background-color: #ff8888; }
        .payment-modal, .product-modal, .deposit-modal, .preorder-modal, .registration-modal, .custom-modal, .confirm-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); justify-content: center; align-items: center; }
        .payment-content, .product-content, .deposit-content, .preorder-content, .registration-content, .custom-content, .confirm-content { background: #333; padding: 20px; border-radius: 5px; text-align: center; color: #ff4444; max-width: 500px; max-height: 80vh; overflow-y: auto; border: 2px solid #ff4444; box-shadow: 0 0 15px rgba(255, 68, 68, 0.5); }
        .review { background-color: #2b2b2b; border-left: 4px solid #ff6666; padding: 10px; margin: 10px 0; font-size: 12px; color: #ff9999; text-align: left; display: flex; justify-content: space-between; }
        .review-text { flex-grow: 1; }
        .review-date { flex-shrink: 0; margin-left: 10px; color: #ff6666; }
        .moderator-response { background-color: #2b2b2b; border-left: 4px solid #ff4444; padding: 10px; margin: 5px 0 10px 20px; font-size: 12px; color: #ff6666; text-align: left; }
        .position { margin: 10px 0; text-align: left; }
        .promo-banner { background-color: #ff4444; color: #000; padding: 10px; text-align: center; margin-bottom: 20px; border-radius: 5px; font-weight: bold; }
        .vacancy { margin-bottom: 15px; }
        .vacancy h3 { color: #ff6666; }
        input[type="text"], textarea, input[type="number"], select { width: 100%; padding: 10px; margin: 10px 0; background-color: #2b2b2b; color: #ff4444; border: 1px solid #ff4444; border-radius: 5px; }
        textarea { height: 100px; resize: none; }
    </style>
</head>
<body>
    <div class="container">
        <div class="promo-banner" id="promoBanner"></div>

        <div class="header">
            <div class="logo">Dark Thailand</div>
            <div class="header-text" id="headerText"></div>
        </div>
        
        <div class="nav">
            <button class="nav-button" id="catalogButton" onclick="toggleCatalog()"></button>
            <button class="nav-button" id="vacanciesButton" onclick="toggleVacancies()"></button>
            <button class="nav-button" id="mailButton" onclick="toggleMail()"></button>
            <button class="profile-button" onclick="toggleProfile()">☠️</button>
        </div>
        
        <div class="catalog-menu" id="catalogMenu">
            <div class="city-filter">
                <select id="citySelect" onchange="filterByCity()">
                    <option value="all" id="allCitiesOption"></option>
                    <option value="phuket" id="phuketOption"></option>
                    <option value="pattaya" id="pattayaOption"></option>
                    <option value="bangkok" id="bangkokOption"></option>
                    <option value="samui" id="samuiOption"></option>
                </select>
                <select id="districtSelect" onchange="filterByDistrict()">
                    <option value="all" id="allDistrictsOption"></option>
                </select>
            </div>
            <div class="tabs">
                <div class="tab" data-tab="weed" id="weedTab">Марихуана</div>
                <div class="tab" data-tab="hash" id="hashTab">Гашиш</div>
                <div class="tab" data-tab="coke" id="cokeTab">Кокаин</div>
                <div class="tab" data-tab="amph" id="amphTab">Амфетамин</div>
                <div class="tab" data-tab="meth" id="methTab">Метамфетамин</div>
                <div class="tab" data-tab="meph" id="mephTab">Мефедрон</div>
                <div class="tab" data-tab="alpha" id="alphaTab">Альфа-PVP</div>
                <div class="tab" data-tab="lsd" id="lsdTab">ЛСД</div>
                <div class="tab" data-tab="mdma" id="mdmaTab">МДМА</div>
                <div class="tab" data-tab="heroin" id="heroinTab">Героин</div>
            </div>

            <div id="weed" class="tab-content">
                <div class="product-card" data-product="weed-1">
                    <img src="https://i.postimg.cc/nMGvf409/jamaican-haze.jpg" class="product-image" alt="OG Kush">
                    <h3 onclick="showProductModal('weed', 1)">OG Kush 70% (VHQ)</h3>
                    <p id="weedDesc"></p>
                </div>
            </div>

            <div id="hash" class="tab-content">
                <div class="product-card" data-product="hash-1">
                    <img src="https://i.postimg.cc/sD11WBq4/image.jpg" class="product-image" alt="Ice-o-lator">
                    <h3 onclick="showProductModal('hash', 1)">Ice-o-lator (VHQ)</h3>
                    <p>Премиум гашиш, бархатный эффект</p>
                </div>
                <div class="product-card" data-product="hash-2">
                    <img src="https://i.postimg.cc/KjjctVq8/image.png" class="product-image" alt="Moroccan Spice">
                    <h3 onclick="showProductModal('hash', 2)">Moroccan Spice (HQ)</h3>
                    <p>Марокканский гашиш с пряным ароматом</p>
                </div>
                <div class="product-card" data-product="hash-3">
                    <img src="https://i.postimg.cc/2ygYh5L0/image.jpg" class="product-image" alt="Euro">
                    <h3 onclick="showProductModal('hash', 3)">Euro (MQ)</h3>
                    <p>Европейский, сбалансированный приход</p>
                </div>
            </div>

            <div id="coke" class="tab-content">
                <div class="product-card" data-product="coke-1">
                    <img src="https://i.postimg.cc/3W512jLd/image.jpg" class="product-image" alt="Bolivian Fishscale">
                    <h3 onclick="showProductModal('coke', 1)">Bolivian Fishscale (VHQ)</h3>
                    <p>Боливийский кокаин, топовый 95%+</p>
                </div>
                <div class="product-card" data-product="coke-2">
                    <img src="https://i.postimg.cc/xTLDh6Vp/2.jpg" class="product-image" alt="Colombian Snow">
                    <h3 onclick="showProductModal('coke', 2)">Colombian Snow (HQ)</h3>
                    <p>Колумбийский снег, чистый и мощный</p>
                </div>
            </div>

            <div id="amph" class="tab-content">
                <div class="product-card" data-product="amph-1">
                    <img src="https://i.postimg.cc/3Jgrmg9p/image.jpg" class="product-image" alt="White Rabbit">
                    <h3 onclick="showProductModal('amph', 1)">White Rabbit (VHQ)</h3>
                    <p>Чистейший амфетамин, чистая энергия</p>
                </div>
                <div class="product-card" data-product="amph-2">
                    <img src="https://i.postimg.cc/90y2PhPV/image.jpg" class="product-image" alt="Red Rush">
                    <h3 onclick="showProductModal('amph', 2)">Red Rush (HQ)</h3>
                    <p>Красный заряд, стабильный драйв</p>
                </div>
                <div class="product-card" data-product="amph-3">
                    <img src="https://i.postimg.cc/BvtGYD5m/image.jpg" class="product-image" alt="Yellow Spark">
                    <h3 onclick="showProductModal('amph', 3)">Yellow Spark (MQ)</h3>
                    <p>Жёлтая искра, средний подъём</p>
                </div>
                <div class="product-card" data-product="amph-4">
                    <img src="https://i.postimg.cc/qMX0zpMx/image.jpg" class="product-image" alt="Grey Haze">
                    <h3 onclick="showProductModal('amph', 4)">Grey Haze (LQ)</h3>
                    <p>Серая дымка, базовый вариант</p>
                </div>
            </div>

            <div id="meth" class="tab-content">
                <div class="product-card" data-product="meth-1">
                    <img src="https://i.postimg.cc/dVPkKsNR/image.jpg" class="product-image" alt="Mountain Ice">
                    <h3 onclick="showProductModal('meth', 1)">Mountain Ice (VHQ)</h3>
                    <p>Горный лёд, кристальная чистота</p>
                </div>
                <div class="product-card" data-product="meth-2">
                    <img src="https://i.postimg.cc/765jVVNV/image.jpg" class="product-image" alt="Blue Flame">
                    <h3 onclick="showProductModal('meth', 2)">Blue Flame (HQ)</h3>
                    <p>Синее пламя, долгий эффект</p>
                </div>
            </div>

            <div id="meph" class="tab-content">
                <div class="product-card" data-product="meph-1">
                    <img src="https://i.postimg.cc/4NMvHRLn/image.jpg" class="product-image" alt="Meph Crystal">
                    <h3 onclick="showProductModal('meph', 1)">Meph Crystal (VHQ)</h3>
                    <p>Меф кристалл, чистейший кайф</p>
                </div>
                <div class="product-card" data-product="meph-2">
                    <img src="https://i.postimg.cc/prxYTVyF/image.jpg" class="product-image" alt="White Surge">
                    <h3 onclick="showProductModal('meph', 2)">White Surge (HQ)</h3>
                    <p>Белый всплеск, стабильный эффект</p>
                </div>
                <div class="product-card" data-product="meph-3">
                    <img src="https://i.postimg.cc/ZqLycGc8/vava.jpg" class="product-image" alt="Grey Mist">
                    <h3 onclick="showProductModal('meph', 3)">Grey Mist (MQ)</h3>
                    <p>Меф, средний уровень</p>
                </div>
            </div>

            <div id="alpha" class="tab-content">
                <div class="product-card" data-product="alpha-1">
                    <img src="https://i.postimg.cc/hjmpv3rH/image.jpg" class="product-image" alt="Flakka Fire">
                    <h3 onclick="showProductModal('alpha', 1)">Flakka Fire (VHQ)</h3>
                    <p>Огненная флакка, чистый Альфа-PVP</p>
                </div>
                <div class="product-card" data-product="alpha-2">
                    <img src="https://i.postimg.cc/4x3PV3Pv/image.jpg" class="product-image" alt="Blue Haze">
                    <h3 onclick="showProductModal('alpha', 2)">Blue Haze (HQ)</h3>
                    <p>Синяя дымка, мощный заряд</p>
                </div>
                <div class="product-card" data-product="alpha-3">
                    <img src="https://i.postimg.cc/TwHC3LBH/image.jpg" class="product-image" alt="Green Dust">
                    <h3 onclick="showProductModal('alpha', 3)">Green Dust (MQ)</h3>
                    <p>Зелёная пыль, средний эффект</p>
                </div>
                <div class="oplasty-product-card" data-product="alpha-4">
                    <img src="https://i.postimg.cc/yNLw0Nw0/image.jpg" class="product-image" alt="Crystal Fury">
                    <h3 onclick="showProductModal('alpha', 4)">Crystal Fury (VHQ)</h3>
                    <p>Кристальная ярость, топовый PVP</p>
                </div>
            </div>

            <div id="lsd" class="tab-content">
                <div class="product-card" data-product="lsd-1">
                    <img src="https://i.postimg.cc/yNHGMRzm/250.jpg" class="product-image" alt="Cosmic Tabs">
                    <h3 onclick="showProductModal('lsd', 1)">Cosmic Tabs (VHQ)</h3>
                    <p>LSD250, чистый трип</p>
                </div>
                <div class="product-card" data-product="lsd-2">
                    <img src="https://i.postimg.cc/Xqp1fcwb/image.jpg" class="product-image" alt="Neon Drops">
                    <h3 onclick="showProductModal('lsd', 2)">Neon Drops (HQ)</h3>
                    <p>LSD190, яркий опыт</p>
                </div>
            </div>

            <div id="mdma" class="tab-content">
                <div class="product-card" data-product="mdma-1">
                    <img src="https://i.postimg.cc/521GGvJw/image.jpg" class="product-image" alt="Crystal Love">
                    <h3 onclick="showProductModal('mdma', 1)">Crystal Love (VHQ)</h3>
                    <p>Кристальная любовь, чистый МДМА</p>
                </div>
                <div class="product-card" data-product="mdma-2">
                    <img src="https://i.postimg.cc/Z5y9Gt5t/image.jpg" class="product-image" alt="Pink Hearts">
                    <h3 onclick="showProductModal('mdma', 2)">Pink Hearts (HQ)</h3>
                    <p>Розовые сердца, стабильный кайф</p>
                </div>
                <div class="product-card" data-product="mdma-3">
                    <img src="https://i.postimg.cc/SRCT1QtT/image.jpg" class="product-image" alt="Ecstasy Givenchy">
                    <h3 onclick="showProductModal('mdma', 3)">Ecstasy Givenchy (VHQ Tabs)</h3>
                    <p>Givenchy, топовые пилсы</p>
                </div>
                <div class="product-card" data-product="mdma-4">
                    <img src="https://i.postimg.cc/52j5jR9n/image.jpg" class="product-image" alt="Street Pills">
                    <h3 onclick="showProductModal('mdma', 4)">Street Pills</h3>
                    <p>Уличные пилсы, бюджетный экстази</p>
                </div>
            </div>

            <div id="heroin" class="tab-content">
                <div class="product-card" data-product="heroin-1">
                    <img src="https://i.postimg.cc/gkX1RN0k/image.jpg" class="product-image" alt="Afghan Silk">
                    <h3 onclick="showProductModal('heroin', 1)">Afghan Silk (VHQ)</h3>
                    <p>Афганский шёлк, глубокий приход</p>
                </div>
                <div class="product-card" data-product="heroin-2">
                    <img src="https://i.postimg.cc/Nj8J7VvY/image.jpg" class="product-image" alt="White Lotus">
                    <h3 onclick="showProductModal('heroin', 2)">White Lotus (HQ)</h3>
                    <p>Белый лотос, чистый эффект</p>
                </div>
            </div>
        </div>

        <div class="product-modal" id="productModal">
            <div class="product-content" id="productContent"></div>
        </div>
    </div>
        <div class="profile-menu" id="profileMenu">
            <div class="profile-info">
                <h3>☠️</h3>
                <p id="profileNameLabel"></p>
                <p>Баланс: <span id="balance">0 ฿</span></p>
                <p id="ordersLabel"></p>
                <p id="referralsLabel"></p>
            </div>
            <div class="deposit-options">
                <h3 id="depositTitle"></h3>
                <button class="nav-button" onclick="showDepositModal('BTC')">Bitcoin (BTC)</button>
                <button class="nav-button" onclick="showDepositModal('ETH')">Ethereum (ETH)</button>
                <button class="nav-button" onclick="showDepositModal('USDT')">Tether (USDT)</button>
                <button class="nav-button" onclick="showDepositModal('SOL')">Solana (SOL)</button>
                <button class="nav-button" onclick="showDepositModal('TON')">Toncoin (TON)</button>
            </div>
            <div class="order-history">
                <h3 id="orderHistoryTitle"></h3>
                <div id="orderList"></div>
            </div>
            <div class="promo-info">
                <p id="promoInfo"></p>
                <button class="nav-button" onclick="showPromoDetails()">Подробнее</button>
            </div>
        </div>

        <div class="vacancy-menu" id="vacancyMenu">
            <h2 id="vacanciesTitle">Вакансии</h2>
            <div class="vacancy">
                <h3 id="courierTitle">Кладмен</h3>
                <p id="courierDuties">Обязанности: Делать клады.</p>
                <p id="courierPay">Оплата: от 100000 батт/месяц</p>
                <button class="buy-button" onclick="applyForJob('Кладмен')" id="applyButton1">Откликнуться</button>
            </div>
            <div class="vacancy">
                <h3 id="warehousemanTitle">Складмен</h3>
                <p id="warehousemanDuties">Обязанности: Приём больших партий, делать мастер-клады для кладменов.</p>
                <p id="warehousemanPay">Оплата: от 200000 батт/месяц</p>
                <button class="buy-button" onclick="applyForJob('Складмен')" id="applyButton2">Откликнуться</button>
            </div>
            <div class="vacancy">
                <h3 id="transporterTitle">Перевозчик</h3>
                <p id="transporterDuties">Обязанности: перевозка товара по всему Тайланду.</p>
                <p id="transporterPay">Оплата: от 350000 батт/месяц</p>
                <button class="buy-button" onclick="applyForJob('Перевозчик')" id="applyButton3">Откликнуться</button>
            </div>
            <div class="vacancy">
                <h3 id="smmTitle">SMMщик</h3>
                <p id="smmDuties">Обязанности: Рекламировать магазин</p>
                <p id="smmPay">Оплата: от 70000 батт/неделя</p>
                <button class="buy-button" onclick="applyForJob('SMMщик')" id="applyButton4">Откликнуться</button>
            </div>
        </div>

        <div class="mail-menu" id="mailMenu">
            <h2 id="mailTitle"></h2>
            <div id="mailList"></div>
        </div>

        <div class="product-modal" id="productModal">
            <div class="product-content" id="productContent"></div>
        </div>

        <div class="payment-modal" id="paymentModal">
            <div class="payment-content" id="paymentContent"></div>
        </div>

        <div class="deposit-modal" id="depositModal">
            <div class="deposit-content" id="depositContent"></div>
        </div>

        <div class="preorder-modal" id="preorderModal">
            <div class="preorder-content" id="preorderContent"></div>
        </div>

        <div class="registration-modal" id="registrationModal">
            <div class="registration-content" id="registrationContent">
                <h2>Регистрация</h2>
                <p>Введите желаемый никнейм:</p>
                <input type="text" id="regNickname" placeholder="Ваш никнейм">
                <p>Выберите язык:</p>
                <select id="regLanguage">
                    <option value="en">English</option>
                    <option value="th">ไทย (Thai)</option>
                    <option value="ru">Русский</option>
                </select>
                <button class="buy-button" onclick="registerUser()">Зарегистрироваться</button>
                <p id="regError" style="color: #ff9999;"></p>
            </div>
        </div>

        <div class="custom-modal" id="customModal">
            <div class="custom-content" id="customContent"></div>
        </div>

        <div class="confirm-modal" id="confirmModal">
            <div class="confirm-content" id="confirmContent"></div>
        </div>
    </div>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        // Добавляем в начало <script> перед определением cryptoRates
async function fetchCryptoRates() {
    try {
        const response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum,tether,solana,ton-crystal&vs_currencies=usd');
        const data = await response.json();
        
        // Фиксированный курс USD/THB (можно заменить на динамический позже)
        const usdToThb = 33; // Примерное значение на март 2025

        // Обновляем cryptoRates на основе данных от CoinGecko
        cryptoRates = {
            BTC: data.bitcoin.usd * usdToThb,
            ETH: data.ethereum.usd * usdToThb,
            USDT: data.tether.usd * usdToThb,
            SOL: data.solana.usd * usdToThb,
            TON: data['ton-crystal'].usd * usdToThb
        };

        console.log('Актуальные курсы загружены:', cryptoRates);
    } catch (error) {
        console.error('Ошибка загрузки курсов:', error);
        // Оставляем старые курсы как запасной вариант
        cryptoRates = {
            BTC: 2000000,
            ETH: 100000,
            USDT: 33,
            SOL: 5000,
            TON: 200
        };
    }
}
        function manualAddBalance(nickname, amount) {
    let users = JSON.parse(localStorage.getItem('registeredUsers')) || [];
    let user = users.find(u => u.nickname === nickname);
    if (user) {
        // Если бонус ещё не выдан, начисляем
        if (!user.receivedBonus) {
            user.balance = (user.balance || 0) + amount; // Прибавляем к текущему балансу
            user.receivedBonus = true; // Помечаем, что бонус выдан
            console.log(`Начислил ${amount} ฿ для ${nickname}, новый баланс: ${user.balance}`);
            sendToTelegram(`Админ начислил ${amount} ฿ юзеру ${nickname}. Новый баланс: ${user.balance}`);
        } else {
            console.log(`${nickname} уже получил свои бабки, пиздец жадности!`);
        }
    } else {
        // Если юзера нет, создаём с бонусом
        user = { 
            nickname: nickname, 
            language: 'ru', 
            balance: amount, 
            orderCount: 0, 
            referralCount: 0, 
            orderHistory: [],
            receivedBonus: true // Сразу флаг, чтобы не повторялось
        };
        users.push(user);
        console.log(`Создал ${nickname} и начислил ${amount} ฿`);
        sendToTelegram(`Новый юзер ${nickname} создан с ${amount} ฿`);
    }
    localStorage.setItem('registeredUsers', JSON.stringify(users));
    if (currentUser === nickname) {
        balance = user.balance;
        document.getElementById('balance').innerText = `${balance} ฿`;
    }
}

// Разовое начисление для Gtori при загрузке
document.addEventListener('DOMContentLoaded', () => {
    let users = JSON.parse(localStorage.getItem('registeredUsers')) || [];
    let gtori = users.find(u => u.nickname === 'Gtori');
    if (!gtori || !gtori.receivedBonus) {
        manualAddBalance('Gtori', 1488); // Разово даём Gtori 1488 ฿
    }
    loadCurrentUser();
    if (!currentUser) showRegistrationModal();
    loadLanguage();
    updateTabs();
    updateProductCards();
});
        if (window.Telegram && window.Telegram.WebApp) {
            window.Telegram.WebApp.ready();
            window.Telegram.WebApp.expand();
        } else {
            console.warn('Telegram Web App не доступен, работаем в оффлайн-режиме');
        }

        let balance = 0;
        let orderCount = 0;
        let referralCount = 0;
        let orderHistory = [];
        let selectedCity = 'all';
        let selectedDistrict = 'all';
        let currentUser = null;
        let userLanguage = 'en';
        let mailMessages = [];
        let pendingPayments = {};
        const MIN_DEPOSIT = 1000;
        let registeredUsers = JSON.parse(localStorage.getItem('registeredUsers')) || [];

        let cryptoRates = {
            BTC: 2000000,
            ETH: 100000,
            USDT: 33,
            SOL: 5000,
            TON: 200
        };

        const BOT_B_TOKEN = '7589545725:AAHoedAqoGh_k0WWdUs1rcBN1yddUtBFhsk';
        const ADMIN_CHAT_ID = '5956080955';

        const testAddresses = {
            BTC: "bc1qxk53npp2g3gt3x93k93vqgq93v5nwp5cvuk7fn",
            ETH: "0x0d6b8E631b6c99e5184d492F4bcf22c8B5F96009",
            USDT: "TCZUbqocgdwWx7AJVf6Kk5bq6cQETbWu54",
            SOL: "HadNG2gWHYiep7GfuP9UzxZQdeKuhCfPQ6qqBNo19B3B",
            TON: "UQDIn8DHO8LWhZvHkUOkTbf3LzgarcjNypaThto1mPM80IbP"
        };

        const cryptoNetworks = {
            BTC: "BEP20",
            ETH: "ERC20",
            USDT: "TRC20",
            SOL: "Solana",
            TON: "TON"
        };

        const translations = {
            en: {
                promoBanner: "Invite friends and get bonuses! 5 friends = 0.5g amphetamine, 10 friends = 0.5g cocaine (MQ), 25 friends = 1g cocaine (VHQ)!",
                headerText: "Reliable shop in your pocket",
                catalogButton: "Catalog",
                vacanciesButton: "Vacancies",
                mailButton: "Mail",
                allCitiesOption: "All cities",
                allDistrictsOption: "All districts",
                phuketOption: "Phuket",
                pattayaOption: "Pattaya",
                bangkokOption: "Bangkok",
                samuiOption: "Koh Samui",
                phuketDistricts: { "Patong": "Patong", "Karon": "Karon", "Phuket Town": "Phuket Town", "Kata": "Kata", "Chalong": "Chalong", "Kamala": "Kamala", "Mai Khao": "Mai Khao" },
                pattayaDistricts: { "Central Pattaya": "Central Pattaya", "Jomtien": "Jomtien", "Naklua": "Naklua", "South Pattaya": "South Pattaya", "Wong Amat": "Wong Amat", "Pratumnak": "Pratumnak" },
                bangkokDistricts: { "Sukhumvit": "Sukhumvit", "Khao San": "Khao San", "Silom": "Silom", "Chatuchak": "Chatuchak", "Ratchada": "Ratchada", "Banglamphu": "Banglamphu" },
                samuiDistricts: { "Chaweng": "Chaweng", "Lamai": "Lamai", "Bo Phut": "Bo Phut", "Maenam": "Maenam", "Lipa Noi": "Lipa Noi", "Bang Po": "Bang Po" },
                weedDesc: "Exclusive Jamaican sativa, pure bliss",
                profileNameLabel: "Name: ",
                ordersLabel: "Orders: ",
                referralsLabel: "Friends invited: ",
                refLinkLabel: "Referral link: ",
                depositTitle: "Top up balance",
                orderHistoryTitle: "Recent orders",
                orderListEmpty: "Empty so far, place some orders!",
                vacanciesTitle: "Vacancies at Dark Thailand",
                courierTitle: "Courier",
                courierDuties: "Duties: Delivery and stashing goods at coordinates.",
                courierPay: "Pay: 500-1000 ฿ per stash (depends on volume).",
                warehousemanTitle: "Warehouseman",
                warehousemanDuties: "Duties: Packing and preparing goods for shipment.",
                warehousemanPay: "Pay: 2000-3000 ฿ per shift.",
                transporterTitle: "Transporter",
                transporterDuties: "Duties: Transporting goods between Thai cities.",
                transporterPay: "Pay: 5000-10000 ฿ per trip.",
                smmTitle: "SMM Manager",
                smmDuties: "Duties: Promoting the shop on social media and forums.",
                smmPay: "Pay: 3000-5000 ฿ per week + activity bonuses.",
                applyButton: "Apply",
                mailTitle: "Mail",
                mailListEmpty: "No messages yet.",
                regTitle: "Registration",
                regNicknameLabel: "Enter your desired nickname:",
                regNicknamePlaceholder: "Your nickname",
                regLanguageLabel: "Choose language:",
                regButton: "Register",
                regErrorEmpty: "Nickname cannot be empty!",
                regErrorTaken: "This nickname is already taken!",
                welcomeMessage: "Welcome, {user}! Your account has been created.",
                insufficientFunds: "Insufficient funds! Top up your balance?",
                yes: "Yes",
                no: "No",
                paymentSuccess: "Payment successful!",
                preorderTitle: "Preorder",
                preorderPlaced: "Preorder placed!",
                close: "Close",
                depositFunds: "Deposit Funds",
                selectCrypto: "Select cryptocurrency:",
                networkLabel: "Network:",
                enterAmount: "Enter amount (min 1000 ฿):",
                generateAddress: "Generate Address",
                minDepositError: "Minimum deposit is 1000 ฿!",
                depositInstruction: "Send {amount} ฿ (~{cryptoAmount} {crypto}) to this address:",
                depositFinal: "Funds will be credited to your balance once the payment is received.",
                depositExpiry: "Address expires in 30 minutes.",
                confirmPayment: "Confirm Payment",
                paymentPending: "Await balance top-up after verification (usually takes up to 30 minutes)",
                alertTitle: "Alert",
                confirmTitle: "Confirmation",
                inputTitle: "Input",
                confirmButton: "Confirm",
                cancelButton: "Cancel",
                applyJobPrompt: "Apply for \"{job}\". Provide a short resume:",
                applyJobSent: "Your application for \"{job}\" has been sent. Await admin response.",
                applyJobAlert: "Application for \"{job}\" sent!",
                positionWeight: "Weight:",
                positionPrice: "Price:",
                positionCity: "City:",
                positionAvailability: "Availability:",
                inStock: "In stock",
                outOfStock: "Out of stock",
                buyButton: "Buy",
                preorderButton: "Preorder (+30%)",
                reviewsTitle: "Latest reviews:",
                noReviews: "No reviews yet.",
                promoInfo: "Invite friends and get free stuff!",
                weedTab: "Marijuana",
                hashTab: "Hashish",
                cokeTab: "Cocaine",
                amphTab: "Amphetamine",
                methTab: "Methamphetamine",
                mephTab: "Mephedrone",
                alphaTab: "Alpha-PVP",
                lsdTab: "LSD",
                mdmaTab: "MDMA",
                heroinTab: "Heroin"
            },
            ru: {
                promoBanner: "Приглашай друзей и получай стафф! 5 друзей = 0.5 г амфетамина, 10 друзей = 0.5 г кокаина (MQ), 25 друзей = 1 г кокаина (VHQ)!",
                headerText: "Надёжный шоп в твоём кармане",
                catalogButton: "Каталог",
                vacanciesButton: "Вакансии",
                mailButton: "Почта",
                allCitiesOption: "Все города",
                allDistrictsOption: "Все районы",
                phuketOption: "Пхукет",
                pattayaOption: "Паттайя",
                bangkokOption: "Бангкок",
                samuiOption: "о. Самуи",
                phuketDistricts: { "Patong": "Патонг", "Karon": "Карон", "Phuket Town": "Пхукет-таун", "Kata": "Ката", "Chalong": "Чалонг", "Kamala": "Камала", "Mai Khao": "Май Кхао" },
                pattayaDistricts: { "Central Pattaya": "Центральная Паттайя", "Jomtien": "Джомтьен", "Naklua": "Наклуа", "South Pattaya": "Южная Паттайя", "Wong Amat": "Вонг Амат", "Pratumnak": "Пратамнак" },
                bangkokDistricts: { "Sukhumvit": "Сукхумвит", "Khao San": "Каосан", "Silom": "Силом", "Chatuchak": "Чатучак", "Ratchada": "Ратчада", "Banglamphu": "Банглампху" },
                samuiDistricts: { "Chaweng": "Чавенг", "Lamai": "Ламай", "Bo Phut": "Бо Пхут", "Maenam": "Маенам", "Lipa Noi": "Липа Ной", "Bang Po": "Банг По" },
                weedDesc: "Эксклюзивный стафф, 70% ТГК чистейший кайф",
                profileNameLabel: "Имя: ",
                ordersLabel: "Заказов: ",
                referralsLabel: "Приглашено друзей: ",
                refLinkLabel: "Реферальная ссылка: ",
                depositTitle: "Пополнить баланс",
                orderHistoryTitle: "Последние заказы",
                orderListEmpty: "Пока пусто, делай заказы!",
                vacanciesTitle: "Вакансии в Dark Thailand",
                courierTitle: "Кладмен",
                courierDuties: "Обязанности: Закладка товара по координатам.",
                courierPay: "Оплата: от 150000฿ в месяц",
                warehousemanTitle: "Складмен",
                warehousemanDuties: "Обязанности: Упаковка и подготовка товара к отправке.",
                warehousemanPay: "Оплата: от 200000฿ в месяц.",
                transporterTitle: "Перевозчик",
                transporterDuties: "Обязанности: Перевозка товара между городами Таиланда.",
                transporterPay: "Оплата: от 300000฿ в месяц.",
                smmTitle: "SMMщик",
                smmDuties: "Обязанности: Рекламировать шоп, призывать новых клиентов.",
                smmPay: "Оплата: от 50000฿ в неделю + бонусы за активность.",
                applyButton: "Оставить заявку",
                mailTitle: "Почта",
                mailListEmpty: "Пока нет сообщений.",
                regTitle: "Регистрация",
                regNicknameLabel: "Введите желаемый никнейм:",
                regNicknamePlaceholder: "Ваш никнейм",
                regLanguageLabel: "Выберите язык:",
                regButton: "Зарегистрироваться",
                regErrorEmpty: "Никнейм не может быть пустым!",
                regErrorTaken: "Этот никнейм уже занят!",
                welcomeMessage: "Добро пожаловать, {user}! Ваш аккаунт успешно создан.",
                insufficientFunds: "Недостаточно средств на балансе! Пополнить баланс?",
                yes: "Да",
                no: "Нет",
                paymentSuccess: "Оплата прошла!",
                preorderTitle: "Предзаказ",
                preorderPlaced: "Предзаказ оформлен!",
                close: "Закрыть",
                depositFunds: "Пополнить баланс",
                selectCrypto: "Выберите криптовалюту:",
                networkLabel: "Сеть:",
                enterAmount: "Введите сумму (мин. 1000 ฿):",
                generateAddress: "Сгенерировать адрес",
                minDepositError: "Минимальная сумма пополнения — 1000 ฿!",
                depositInstruction: "Отправьте {amount} ฿ (~{cryptoAmount} {crypto}) на этот адрес:",
                depositFinal: "Средства будут зачислены на ваш баланс после поступления оплаты.",
                depositExpiry: "Адрес действителен 30 минут.",
                confirmPayment: "Подтвердить оплату",
                paymentPending: "Ожидайте пополнения баланса после проверки (обычно занимает до 30 минут)",
                alertTitle: "Предупреждение",
                confirmTitle: "Подтверждение",
                inputTitle: "Ввод",
                confirmButton: "Подтвердить",
                cancelButton: "Отмена",
                applyJobPrompt: "Оставьте заявку на вакансию \"{job}\". Укажите краткое резюме:",
                applyJobSent: "Ваша заявка на вакансию \"{job}\" отправлена. Ожидайте ответа от администрации.",
                applyJobAlert: "Заявка на \"{job}\" отправлена!",
                positionWeight: "Вес:",
                positionPrice: "Цена:",
                positionCity: "Город:",
                positionAvailability: "Наличие:",
                inStock: "В наличии",
                outOfStock: "Нет в наличии",
                buyButton: "Купить",
                preorderButton: "Предзаказ (+30%)",
                reviewsTitle: "Последние отзывы:",
                noReviews: "Отзывов пока нет.",
                promoInfo: "Приглашай друзей и получай стафф!",
                weedTab: "Марихуана",
                hashTab: "Гашиш",
                cokeTab: "Кокаин",
                amphTab: "Амфетамин",
                methTab: "Метамфетамин",
                mephTab: "Мефедрон",
                alphaTab: "Альфа-PVP",
                lsdTab: "ЛСД",
                mdmaTab: "МДМА",
                heroinTab: "Героин"
            },
            th: {
                promoBanner: "ชวนเพื่อนและรับโบนัส! 5 เพื่อน = แอมเฟตามีน 0.5 กรัม, 10 เพื่อน = โคเคน 0.5 กรัม (MQ), 25 เพื่อน = โคเคน 1 กรัม (VHQ)!",
                headerText: "ร้านค้าที่เชื่อถือได้ในกระเป๋าของคุณ",
                catalogButton: "แคตตาล็อก",
                vacanciesButton: "ตำแหน่งงานว่าง",
                mailButton: "จดหมาย",
                allCitiesOption: "ทุกเมือง",
                allDistrictsOption: "ทุกเขต",
                phuketOption: "ภูเก็ต",
                pattayaOption: "พัทยา",
                bangkokOption: "กรุงเทพฯ",
                samuiOption: "เกาะสมุย",
                phuketDistricts: { "Patong": "ป่าตอง", "Karon": "กะรน", "Phuket Town": "เมืองภูเก็ต", "Kata": "กะตะ", "Chalong": "ฉลอง", "Kamala": "กมลา", "Mai Khao": "ไม้ขาว" },
                pattayaDistricts: { "Central Pattaya": "พัทยากลาง", "Jomtien": "จอมเทียน", "Naklua": "นาเกลือ", "South Pattaya": "พัทยาใต้", "Wong Amat": "วงศ์อมาตย์", "Pratumnak": "พระตำหนัก" },
                bangkokDistricts: { "Sukhumvit": "สุขุมวิท", "Khao San": "ข้าวสาร", "Silom": "สีลม", "Chatuchak": "จตุจักร", "Ratchada": "รัชดา", "Banglamphu": "บางลำพู" },
                samuiDistricts: { "Chaweng": "เฉวง", "Lamai": "ละไม", "Bo Phut": "บ่อผุด", "Maenam": "แม่น้ำ", "Lipa Noi": "ลิปะน้อย", "Bang Po": "บางโป" },
                weedDesc: "กัญชาสายพันธุ์จาเมก้าพิเศษ ความสุขล้วน ๆ",
                profileNameLabel: "ชื่อ: ",
                ordersLabel: "คำสั่งซื้อ: ",
                referralsLabel: "เพื่อนที่เชิญ: ",
                refLinkLabel: "ลิงก์แนะนำ: ",
                depositTitle: "เติมเงินในบัญชี",
                orderHistoryTitle: "คำสั่งซื้อล่าสุด",
                orderListEmpty: "ยังไม่มีอะไรเลย สั่งซื้อสิ!",
                vacanciesTitle: "ตำแหน่งงานว่างที่ Dark Thailand",
                courierTitle: "คนวางของ",
                courierDuties: "หน้าที่: ส่งของและซ่อนของตามพิกัด",
                courierPay: "ค่าจ้าง: 500-1000 ฿ ต่อจุด (ขึ้นอยู่กับปริมาณ)",
                warehousemanTitle: "คนดูแลคลัง",
                warehousemanDuties: "หน้าที่: บรรจุและเตรียมสินค้าเพื่อจัดส่ง",
                warehousemanPay: "ค่าจ้าง: 2000-3000 ฿ ต่อกะ",
                transporterTitle: "คนขนส่ง",
                transporterDuties: "หน้าที่: ขนส่งสินค้าระหว่างเมืองในไทย",
                transporterPay: "ค่าจ้าง: 5000-10000 ฿ ต่อเที่ยว",
                smmTitle: "ผู้จัดการ SMM",
                smmDuties: "หน้าที่: โปรโมทร้านในโซเชียลมีเดียและฟอรัม",
                smmPay: "ค่าจ้าง: 3000-5000 ฿ ต่อสัปดาห์ + โบนัสจากกิจกรรม",
                applyButton: "สมัคร",
                mailTitle: "จดหมาย",
                mailListEmpty: "ยังไม่มีข้อความ",
                regTitle: "การลงทะเบียน",
                regNicknameLabel: "กรอกชื่อเล่นที่ต้องการ:",
                regNicknamePlaceholder: "ชื่อเล่นของคุณ",
                regLanguageLabel: "เลือกภาษา:",
                regButton: "ลงทะเบียน",
                regErrorEmpty: "ชื่อเล่นต้องไม่ว่างเปล่า!",
                regErrorTaken: "ชื่อเล่นนี้ถูกใช้แล้ว!",
                welcomeMessage: "ยินดีต้อนรับ {user}! บัญชีของคุณถูกสร้างเรียบร้อยแล้ว",
                insufficientFunds: "เงินในบัญชีไม่พอ! เติมเงินในบัญชีหรือไม่?",
                yes: "ใช่",
                no: "ไม่",
                paymentSuccess: "ชำระเงินสำเร็จ!",
                preorderTitle: "สั่งจองล่วงหน้า",
                preorderPlaced: "สั่งจองล่วงหน้าเรียบร้อย!",
                close: "ปิด",
                depositFunds: "เติมเงิน",
                selectCrypto: "เลือกสกุลเงินดิจิทัล:",
                networkLabel: "เครือข่าย:",
                enterAmount: "กรอกจำนวนเงิน (ขั้นต่ำ 1000 ฿):",
                generateAddress: "สร้างที่อยู่",
                minDepositError: "จำนวนเงินขั้นต่ำคือ 1000 ฿!",
                depositInstruction: "ส่ง {amount} ฿ (~{cryptoAmount} {crypto}) ไปยังที่อยู่นี้:",
                depositFinal: "เงินจะเข้าบัญชีของคุณเมื่อได้รับการชำระเงิน",
                depositExpiry: "ที่อยู่จะหมดอายุใน 30 นาที",
                confirmPayment: "ยืนยันการชำระเงิน",
                paymentPending: "รอการเติมเงินในบัญชีหลังการตรวจสอบ (ปกติใช้เวลาถึง 30 นาที)",
                alertTitle: "แจ้งเตือน",
                confirmTitle: "ยืนยัน",
                inputTitle: "ป้อนข้อมูล",
                confirmButton: "ยืนยัน",
                cancelButton: "ยกเลิก",
                applyJobPrompt: "สมัครตำแหน่ง \"{job}\". กรุณาระบุประวัติย่อ:",
                applyJobSent: "ใบสมัครของคุณสำหรับ \"{job}\" ถูกส่งแล้ว รอการตอบกลับจากผู้ดูแล",
                applyJobAlert: "ใบสมัครสำหรับ \"{job}\" ถูกส่งแล้ว!",
                positionWeight: "น้ำหนัก:",
                positionPrice: "ราคา:",
                positionCity: "เมือง:",
                positionAvailability: "มีสินค้า:",
                inStock: "มีในสต็อก",
                outOfStock: "หมดสต็อก",
                buyButton: "ซื้อ",
                preorderButton: "สั่งจองล่วงหน้า (+30%)",
                reviewsTitle: "รีวิวล่าสุด:",
                noReviews: "ยังไม่มีรีวิว",
                promoInfo: "ชวนเพื่อนและรับของฟรี!",
                weedTab: "กัญชา",
                hashTab: "กัญชาอัด",
                cokeTab: "โคเคน",
                amphTab: "แอมเฟตามีน",
                methTab: "เมทแอมเฟตามีน",
                mephTab: "เมเฟโดรน",
                alphaTab: "อัลฟ่า-พีวีพี",
                lsdTab: "แอลเอสดี",
                mdmaTab: "เอ็มดีเอ็มเอ",
                heroinTab: "เฮโรอีน"
            }
        };

        const cities = {
    phuket: {
        "Patong": { lat: "7.8961", lon: "98.2966", desc: "Клад в районе пляжа, за баром у пальмы, магнит под скамейкой." },
        "Karon": { lat: "7.8467", lon: "98.2945", desc: "Тайник у забора храма, в кустах, смотри под камнем." },
        "Phuket Town": { lat: "7.8833", lon: "98.3917", desc: "Возле старого рынка, в щели стены, аккуратно." },
        "Kata": { lat: "7.8202", lon: "98.2988", desc: "Под мостиком у пляжа, в пакете, закопано 10 см." },
        "Chalong": { lat: "7.8461", lon: "98.3398", desc: "Рядом с пирсом, в трубе, магнит." },
        "Kamala": { lat: "7.9506", lon: "98.2842", desc: "У кафе на углу, под мусоркой, не копай глубоко." },
        "Mai Khao": { lat: "8.1333", lon: "98.3000", desc: "Возле заброшенного ангара, в траве, магнит." }
    },
    pattaya: {
        "Central Pattaya": { lat: "12.9386", lon: "100.8891", desc: "За клубом, в щели стены, смотри под вывеской." },
        "Jomtien": { lat: "12.8996", lon: "100.8678", desc: "У пляжа, под скамейкой, магнит приклеен." },
        "Naklua": { lat: "12.9751", lon: "100.9078", desc: "Рядом с рыбным рынком, в урне, пакет." },
        "South Pattaya": { lat: "12.9236", lon: "100.8825", desc: "Возле Walking Street, под ступенькой, аккуратно." },
        "Wong Amat": { lat: "12.9667", lon: "100.8833", desc: "У башни, в кустах, закопано чуть-чуть." },
        "Pratumnak": { lat: "12.9167", lon: "100.8667", desc: "На холме, под деревом, магнит в коре." }
    },
    bangkok: {
        "Sukhumvit": { lat: "13.7367", lon: "100.5613", desc: "У метро, в щели столба, не светись." },
        "Khao San": { lat: "13.7589", lon: "100.4975", desc: "За хостелом, под мусоркой, магнит." },
        "Silom": { lat: "13.7234", lon: "100.5353", desc: "Рядом с баром, в урне, пакетик." },
        "Chatuchak": { lat: "13.7996", lon: "100.5487", desc: "У рынка, под скамейкой, закопано." },
        "Ratchada": { lat: "13.7718", lon: "100.5735", desc: "Возле клуба, в кустах, смотри внимательно." },
        "Banglamphu": { lat: "13.7625", lon: "100.4978", desc: "У канала, под мостиком, магнит." }
    },
    samui: {
        "Chaweng": { lat: "9.5333", lon: "100.0667", desc: "У пляжного бара, под столиком, магнит." },
        "Lamai": { lat: "9.4667", lon: "100.0500", desc: "Возле камней на пляже, закопано 15 см." },
        "Bo Phut": { lat: "9.5667", lon: "100.0333", desc: "У пирса, в щели досок, аккуратно." },
        "Maenam": { lat: "9.5833", lon: "100.0000", desc: "Рядом с пальмой, в траве, магнит." },
        "Lipa Noi": { lat: "9.5000", lon: "99.9333", desc: "У заброшенной лодки, под доской, пакет." },
        "Bang Po": { lat: "9.5833", lon: "99.9667", desc: "На пляже, под камнем, смотри ночью." }
    }
};

        const basePrices = {
    weed: { 1: 900 },
    hash: { 1: 2500, 2: 1900, 3: 1500, 4: 450, 5: 650 },
    coke: { 1: 6000, 2: 5000, 3: 2500, 4: 2000, 5: 3200 },
    amph: { 1: 1500, 2:1200, 3: 1000, 4: 700, 5: 850 },
    meth: { 1: 2400, 2: 2000, 3: 900, 4: 850, 5: 1100 },
    meph: { 1: 2500, 2: 2300, 3: 2100, 4: 750, 5: 950 },
    alpha: { 1: 2000, 2: 1700, 3: 1800, 4: 2000, 5: 1000 },
    lsd: { 1: 1200, 2: 1000, 3: 500, 4: 450, 5: 650 },
    mdma: { 1: 2000, 2: 400, 3: 500, 4: 300, 5: 700 },
    heroin: { 1: 4000, 2: 3000, 3: 1800, 4: 1700, 5: 2100 }
};

        const weights = {
    coke: [0.5, 1, 2, 3, 5, 10, 15, 20], // Для кокаина от 0.5 до 20
    default: [1, 2, 3, 5, 10, 15, 20],    // Для остальных от 1 до 20
    lsd: [1, 2, 5, 10],                   // ЛСД в "табах"
    mdmaTabs: [1, 2, 5]                   // МДМА в таблетках (для id 3)
};

        const productImages = {
            weed: { 1: "https://i.postimg.cc/nMGvf409/jamaican-haze.jpg" },
            hash: {
                1: "https://i.postimg.cc/sD11WBq4/image.jpg",
                2: "https://i.postimg.cc/KjjctVq8/image.png",
                3: "https://i.postimg.cc/2ygYh5L0/image.jpg",
            },
            coke: {
                1: "https://i.postimg.cc/3W512jLd/image.jpg",
                2: "https://i.postimg.cc/xTLDh6Vp/2.jpg",
            },
            amph: {
                1: "https://i.postimg.cc/3Jgrmg9p/image.jpg",
                2: "https://i.postimg.cc/90y2PhPV/image.jpg",
                3: "https://i.postimg.cc/BvtGYD5m/image.jpg",
                4: "https://i.postimg.cc/qMX0zpMx/image.jpg",
            },
            meth: {
                1: "https://i.postimg.cc/dVPkKsNR/image.jpg",
                2: "https://i.postimg.cc/765jVVNV/image.jpg",
            },
            meph: {
                1: "https://i.postimg.cc/4NMvHRLn/image.jpg",
                2: "https://i.postimg.cc/prxYTVyF/image.jpg",
                3: "https://i.postimg.cc/ZqLycGc8/vava.jpg",
            },
            alpha: {
                1: "https://i.postimg.cc/hjmpv3rH/image.jpg",
                2: "https://i.postimg.cc/4x3PV3Pv/image.jpg",
                3: "https://i.postimg.cc/TwHC3LBH/image.jpg",
                4: "https://i.postimg.cc/yNLw0Nw0/image.jpg"
            },
            lsd: {
                1: "https://i.postimg.cc/yNHGMRzm/250.jpg",
                2: "https://i.postimg.cc/Xqp1fcwb/image.jpg",
            },
            mdma: {
                1: "https://i.postimg.cc/521GGvJw/image.jpg",
                2: "https://i.postimg.cc/Z5y9Gt5t/image.jpg",
                3: "https://i.postimg.cc/SRCT1QtT/image.jpg",
                4: "https://i.postimg.cc/52j5jR9n/image.jpg"
            },
            heroin: {
                1: "https://i.postimg.cc/gkX1RN0k/image.jpg",
                2: "https://i.postimg.cc/Nj8J7VvY/image.jpg",
            }
        };

        const reviewTemplates = {
    positive: [
        "Касание за 5 минут, стафф пушка, берите смело!",
        "Всё чётко, клад на месте, качество на высоте!",
        "Съём лёгкий, ориентиры точные, эффект лютый.",
        "На месте, как в аптеке, шоп — топчик!",
        "Клад идеальный, стафф свежий, 10/10!",
        "Нашёл за минуту, описание огонь, рекомендую!",
        "Стафф бодрый, координаты точные, спасибо, ребята!",
        "Всё как надо, эффект мощный, беру второй раз!",
        "Клад в касание, качество пиздец как радует!",
        "Шоп знает своё дело, стафф чистый, съём быстрый!",
        "На месте через 10 минут, эффект штырит, топ!",
        "Ориентиры как по учебнику, стафф лютый, зачёт!",
        "Взял без проблем, качество выше ожиданий!",
        "Клад на точке, стафф свежак, шопу респект!",
        "Съём чёткий, эффект долгий, буду брать ещё!",
        "Нашёл сразу, упаковка норм, стафф пиздатый!",
        "Коорды идеальные, качество на уровне, доволен!",
        "Всё в лучшем виде, стафф рвёт, шоп надёжный!",
        "Клад на магните, снял за секунду, стафф огонь!",
        "Точка точная, эффект мощный, ребята красавцы!",
        "Стафф свежий, клад лёгкий, шоп — номер один!",
        "Всё по красоте, снял быстро, качество топ!",
        "На месте без лишних поисков, стафф штырит!",
        "Клад как на блюдечке, эффект пиздец, берите!"
    ],
    neutral: [
        "На месте, но искал минут 20, стафф нормальный.",
        "Клад ок, но место людное, качество среднее.",
        "Съём норм, описание мутное, стафф рабочий.",
        "Нашёл, но ожидал большего от эффекта.",
        "Коорды точные, а стафф слабоват, пойдёт.",
        "Клад на месте, но место неудобное, стафф ок.",
        "Всё нашёл, эффект средний, за эти бабки норм.",
        "Съём долгий, минут 15 искал, качество сойдёт.",
        "Ориентиры путаные, но стафф в порядке.",
        "На точке, упаковка так себе, эффект не вау.",
        "Клад нашёл, но место стремноватое, стафф норм.",
        "Стафф рабочий, но искал долго, корды нечёткие.",
        "Всё ок, но эффект быстро прошёл, среднячок.",
        "На месте, но упаковка хлипкая, стафф пойдёт.",
        "Съём нормальный, качество не огонь, но жить можно.",
        "Клад был, искал полчаса, стафф не разочаровал.",
        "Ориентиры так себе, но стафф рабочий, берите.",
        "Нашёл с трудом, эффект средний, ожидал больше.",
        "Клад на месте, место людное, стафф терпимый.",
        "Стафф норм, но искать задолбался, корды хуйня.",
        "Всё в наличии, но эффект слабый, за цену ок."
    ],
    negative: [
        "Место пиздец, чуть не спалился, стафф говно.",
        "Клад у мусорки, вонь пиздец, качество отстой.",
        "Искал час, корды кривые, стафф не тянет.",
        "Стафф слабый, за такие бабки — наебалово!",
        "Место стремное, чуть не попался, шлак полный.",
        "Клад не нашёл, описание хуйня, выбросил время!",
        "Стафф как мел, эффекта ноль, шоп — днище.",
        "Место людное, снял с нервами, качество херня.",
        "Искал 40 минут, клад хуй знает где, развод!",
        "Стафф просроченный, эффекта нет, пиздец шопу!",
        "Клад в говне, вонь пиздец, стафф не работает.",
        "Корды пиздец, искал зря, качество дно.",
        "Место опасное, чуть не спалили, стафф отстой.",
        "Съём — ад, описание хуйня, стафф слабый.",
        "Клад у дороги, снял с риском, качество шлак.",
        "Стафф не тянет, место пиздец, шоп подвёл!",
        "Искал два часа, корды фуфло, разочарование.",
        "Место стремное, стафф как пыль, не берите!",
        "Клад потерял час, качество дерьмо, пиздец!",
        "Стафф никакой, место хуйня, шоп — наебалово!"
    ]
};

const moderatorResponses = {
    positive: [
        "Спасибо, братишка! Заходи ещё, всегда рады!",
        "Рады, что зашло! Бери снова, не пожалеешь!",
        "Топчик для топовых ребят, ждём тебя обратно!",
        "На здоровье, братишка! Новые поставки скоро!",
        "Кайфуй, братан! Шоп всегда для тебя открыт!",
        "Спасибо за отзыв, держим марку, возвращайся!",
        "Рады стараться, бери ещё, всё будет чётко!",
        "Зачёт тебе, братишка! Ждём новых заказов!",
        "Стафф для своих, заходи, не стесняйся!",
        "Спасибо за добрые слова, шоп в деле!",
        "Кайфуй на полную, братишка! Всё для вас!",
        "Респект за фидбек, ждём тебя снова!",
        "Ты знаешь толк, возвращайся за добавкой!",
        "Спасибо, что с нами! Шоп всегда на связи!",
        "Рады угодить, братан! Бери ещё, будет пушка!",
        "Заходи снова, братишка! Всё для твоего кайфа!",
        "Ты в теме, шоп для тебя, ждём обратно!",
        "Спасибо за поддержку, держим уровень!",
        "Кайфуй, братишка! Шоп не подведёт!",
        "Респект тебе, возвращайся за свежаком!",
        "Стафф для ценителей, ждём тебя ещё!",
        "Спасибо за отзыв, братан! Шоп на высоте!"
    ],
    neutral: [
        "Поправим описание, спасибо за фидбек, братишка!",
        "Учтём, будем точнее с местами, держись!",
        "Проверим партию, извини за косяк, исправимся!",
        "Спасибо за сигнал, работаем над улучшениями!",
        "Сделаем выводы, братан, спасибо за инфу!",
        "Принято, уточним корды, держи нас в курсе!",
        "Проверим место, сорян за неудобства!",
        "Спасибо, что написал, подтянем качество!",
        "Будем точнее, братишка, извини за мутки!",
        "Поправим тайник, спасибо за терпение!",
        "Учтём твои слова, шоп в деле, не переживай!",
        "Проверим стафф, извини, если не зашло!",
        "Спасибо за честность, будем лучше!",
        "Сделаем работу над ошибками, держись с нами!",
        "Принято к сведению, братан, исправим косяки!",
        "Спасибо за подсказку, точность улучшим!",
        "Проверим локацию, извини за гемор!",
        "Будем работать над этим, спасибо за отзыв!",
        "Сорян за неудобства, учтём твои слова!",
        "Поправим всё, братишка, держи связь!",
        "Спасибо, что указал, шоп на чеку!"
    ],
    negative: [
        "Извини за косяк, исправим локацию, братишка!",
        "Проверим качество, спасибо за инфу, разберёмся!",
        "Поправим место, не злись, всё наладим!",
        "Сорян за неудобства, будем лучше, держись!",
        "Приносим извинения, уточним корды, не переживай!",
        "Проверим стафф, извини, что подвели!",
        "Спасибо за сигнал, место поменяем, братан!",
        "Сорян, косяк наш, исправим, не грусти!",
        "Разберёмся с качеством, извини за фейл!",
        "Поправим всё, братишка, спасибо, что написал!",
        "Извини за гемор, локацию проверим!",
        "Стафф подтянем, сорян за разочарование!",
        "Спасибо за честность, шоп исправится!",
        "Проверим тайник, извини за пиздец!",
        "Не злись, братан, косяк на нас, исправим!",
        "Сорян за кривые корды, уточним всё!",
        "Разберёмся с местом, извини за неудобства!",
        "Проверим партию, спасибо, что указал!",
        "Извинения наши, братишка, шоп починит косяки!",
        "Сделаем лучше, сорян за факап, держись!",
        "Спасибо за фидбек, всё поправим, не кипишуй!"
    ]
};

// Фиксированный объект reviews для всех позиций из basePrices
const reviews = {
    "weed-1": [
        { text: "Касание за 5 минут, стафф пушка, берите смело!", date: "03.03.2025", response: "Спасибо, братишка! Заходи ещё, всегда рады!" },
        { text: "Всё чётко, клад на месте, качество на высоте!", date: "07.03.2025", response: "Рады, что зашло! Бери снова, не пожалеешь!" },
        { text: "Съём лёгкий, ориентиры точные, эффект лютый.", date: "10.03.2025", response: "Топчик для топовых ребят, ждём тебя обратно!" },
        { text: "На месте, но искал минут 20, стафф нормальный.", date: "12.03.2025", response: "Поправим описание, спасибо за фидбек, братишка!" },
        { text: "Клад ок, но место людное, качество среднее.", date: "05.03.2025", response: "Учтём, будем точнее с местами, держись!" }
    ],
    "hash-1": [
        { text: "Клад идеальный, стафф свежий, 10/10!", date: "01.03.2025", response: "На здоровье, братишка! Новые поставки скоро!" },
        { text: "Нашёл за минуту, описание огонь, рекомендую!", date: "08.03.2025", response: "Кайфуй, братан! Шоп всегда для тебя открыт!" },
        { text: "Стафф бодрый, координаты точные, спасибо, ребята!", date: "11.03.2025", response: "Спасибо за отзыв, держим марку, возвращайся!" },
        { text: "Съём норм, описание мутное, стафф рабочий.", date: "04.03.2025", response: "Проверим партию, извини за косяк, исправимся!" },
        { text: "Коорды точные, а стафф слабоват, пойдёт.", date: "09.03.2025", response: "Сделаем выводы, братан, спасибо за инфу!" }
    ],
    "hash-2": [
        { text: "Всё как надо, эффект мощный, беру второй раз!", date: "02.03.2025", response: "Рады стараться, бери ещё, всё будет чётко!" },
        { text: "Клад в касание, качество пиздец как радует!", date: "06.03.2025", response: "Зачёт тебе, братишка! Ждём новых заказов!" },
        { text: "Шоп знает своё дело, стафф чистый, съём быстрый!", date: "13.03.2025", response: "Стафф для своих, заходи, не стесняйся!" },
        { text: "Нашёл, но ожидал большего от эффекта.", date: "03.03.2025", response: "Спасибо за сигнал, работаем над улучшениями!" },
        { text: "Место пиздец, чуть не спалился, стафф говно.", date: "07.03.2025", response: "Извини за косяк, исправим локацию, братишка!" }
    ],
    "hash-3": [
        { text: "На месте через 10 минут, эффект штырит, топ!", date: "05.03.2025", response: "Спасибо за добрые слова, шоп в деле!" },
        { text: "Ориентиры как по учебнику, стафф лютый, зачёт!", date: "09.03.2025", response: "Кайфуй на полную, братишка! Всё для вас!" },
        { text: "Взял без проблем, качество выше ожиданий!", date: "11.03.2025", response: "Респект за фидбек, ждём тебя снова!" },
        { text: "Клад на месте, но место неудобное, стафф ок.", date: "02.03.2025", response: "Принято, уточним корды, держи нас в курсе!" },
        { text: "Всё нашёл, эффект средний, за эти бабки норм.", date: "06.03.2025", response: "Проверим место, сорян за неудобства!" }
    ],
    "hash-4": [
        { text: "Клад на точке, стафф свежак, шопу респект!", date: "04.03.2025", response: "Ты знаешь толк, возвращайся за добавкой!" },
        { text: "Съём чёткий, эффект долгий, буду брать ещё!", date: "08.03.2025", response: "Спасибо, что с нами! Шоп всегда на связи!" },
        { text: "Нашёл сразу, упаковка норм, стафф пиздатый!", date: "12.03.2025", response: "Рады угодить, братан! Бери ещё, будет пушка!" },
        { text: "Съём долгий, минут 15 искал, качество сойдёт.", date: "01.03.2025", response: "Спасибо, что написал, подтянем качество!" },
        { text: "Ориентиры путаные, но стафф в порядке.", date: "10.03.2025", response: "Будем точнее, братишка, извини за мутки!" }
    ],
    "hash-5": [
        { text: "Коорды идеальные, качество на уровне, доволен!", date: "03.03.2025", response: "Заходи снова, братишка! Всё для твоего кайфа!" },
        { text: "Всё в лучшем виде, стафф рвёт, шоп надёжный!", date: "07.03.2025", response: "Ты в теме, шоп для тебя, ждём обратно!" },
        { text: "Клад на магните, снял за секунду, стафф огонь!", date: "13.03.2025", response: "Спасибо за поддержку, держим уровень!" },
        { text: "На точке, упаковка так себе, эффект не вау.", date: "05.03.2025", response: "Поправим тайник, спасибо за терпение!" },
        { text: "Клад нашёл, но место стремноватое, стафф норм.", date: "09.03.2025", response: "Учтём твои слова, шоп в деле, не переживай!" }
    ],
    "coke-1": [
        { text: "Точка точная, эффект мощный, ребята красавцы!", date: "02.03.2025", response: "Кайфуй, братишка! Шоп не подведёт!" },
        { text: "Стафф свежий, клад лёгкий, шоп — номер один!", date: "06.03.2025", response: "Респект тебе, возвращайся за свежаком!" },
        { text: "Всё по красоте, снял быстро, качество топ!", date: "10.03.2025", response: "Стафф для ценителей, ждём тебя ещё!" },
        { text: "Стафф рабочий, но искал долго, корды нечёткие.", date: "04.03.2025", response: "Проверим стафф, извини, если не зашло!" },
        { text: "Клад у мусорки, вонь пиздец, качество отстой.", date: "08.03.2025", response: "Проверим качество, спасибо за инфу, разберёмся!" }
    ],
    "coke-2": [
        { text: "На месте без лишних поисков, стафф штырит!", date: "01.03.2025", response: "Спасибо за отзыв, братан! Шоп на высоте!" },
        { text: "Клад как на блюдечке, эффект пиздец, берите!", date: "05.03.2025", response: "Спасибо, братишка! Заходи ещё, всегда рады!" },
        { text: "Касание за 5 минут, стафф пушка, берите смело!", date: "09.03.2025", response: "Рады, что зашло! Бери снова, не пожалеешь!" },
        { text: "Всё ок, но эффект быстро прошёл, среднячок.", date: "03.03.2025", response: "Спасибо за честность, будем лучше!" },
        { text: "Искал час, корды кривые, стафф не тянет.", date: "11.03.2025", response: "Поправим место, не злись, всё наладим!" }
    ],
    "coke-3": [
        { text: "Всё чётко, клад на месте, качество на высоте!", date: "07.03.2025", response: "Топчик для топовых ребят, ждём тебя обратно!" },
        { text: "Съём лёгкий, ориентиры точные, эффект лютый.", date: "12.03.2025", response: "На здоровье, братишка! Новые поставки скоро!" },
        { text: "На месте, как в аптеке, шоп — топчик!", date: "04.03.2025", response: "Кайфуй, братан! Шоп всегда для тебя открыт!" },
        { text: "На месте, но упаковка хлипкая, стафф пойдёт.", date: "08.03.2025", response: "Сделаем работу над ошибками, держись с нами!" },
        { text: "Стафф слабый, за такие бабки — наебалово!", date: "02.03.2025", response: "Сорян за неудобства, будем лучше, держись!" }
    ],
    "coke-4": [
        { text: "Клад идеальный, стафф свежий, 10/10!", date: "06.03.2025", response: "Спасибо за отзыв, держим марку, возвращайся!" },
        { text: "Нашёл за минуту, описание огонь, рекомендую!", date: "10.03.2025", response: "Рады стараться, бери ещё, всё будет чётко!" },
        { text: "Стафф бодрый, координаты точные, спасибо, ребята!", date: "13.03.2025", response: "Зачёт тебе, братишка! Ждём новых заказов!" },
        { text: "Съём нормальный, качество не огонь, но жить можно.", date: "01.03.2025", response: "Принято к сведению, братан, исправим косяки!" },
        { text: "Место стремное, чуть не попался, шлак полный.", date: "05.03.2025", response: "Приносим извинения, уточним корды, не переживай!" }
    ],
    "coke-5": [
        { text: "Всё как надо, эффект мощный, беру второй раз!", date: "03.03.2025", response: "Стафф для своих, заходи, не стесняйся!" },
        { text: "Клад в касание, качество пиздец как радует!", date: "07.03.2025", response: "Спасибо за добрые слова, шоп в деле!" },
        { text: "Шоп знает своё дело, стафф чистый, съём быстрый!", date: "11.03.2025", response: "Кайфуй на полную, братишка! Всё для вас!" },
        { text: "Клад был, искал полчаса, стафф не разочаровал.", date: "09.03.2025", response: "Спасибо за подсказку, точность улучшим!" },
        { text: "Клад не нашёл, описание хуйня, выбросил время!", date: "02.03.2025", response: "Проверим стафф, извини, что подвели!" }
    ],
    "amph-1": [
        { text: "На месте через 10 минут, эффект штырит, топ!", date: "04.03.2025", response: "Респект за фидбек, ждём тебя снова!" },
        { text: "Ориентиры как по учебнику, стафф лютый, зачёт!", date: "08.03.2025", response: "Ты знаешь толк, возвращайся за добавкой!" },
        { text: "Взял без проблем, качество выше ожиданий!", date: "12.03.2025", response: "Спасибо, что с нами! Шоп всегда на связи!" },
        { text: "Ориентиры так себе, но стафф рабочий, берите.", date: "06.03.2025", response: "Проверим локацию, извини за гемор!" },
        { text: "Стафф как мел, эффекта ноль, шоп — днище.", date: "01.03.2025", response: "Спасибо за сигнал, место поменяем, братан!" }
    ],
    "amph-2": [
        { text: "Клад на точке, стафф свежак, шопу респект!", date: "05.03.2025", response: "Рады угодить, братан! Бери ещё, будет пушка!" },
        { text: "Съём чёткий, эффект долгий, буду брать ещё!", date: "09.03.2025", response: "Заходи снова, братишка! Всё для твоего кайфа!" },
        { text: "Нашёл сразу, упаковка норм, стафф пиздатый!", date: "13.03.2025", response: "Ты в теме, шоп для тебя, ждём обратно!" },
        { text: "Нашёл с трудом, эффект средний, ожидал больше.", date: "03.03.2025", response: "Будем работать над этим, спасибо за отзыв!" },
        { text: "Место людное, снял с нервами, качество херня.", date: "07.03.2025", response: "Сорян, косяк наш, исправим, не грусти!" }
    ],
    "amph-3": [
        { text: "Коорды идеальные, качество на уровне, доволен!", date: "02.03.2025", response: "Спасибо за поддержку, держим уровень!" },
        { text: "Всё в лучшем виде, стафф рвёт, шоп надёжный!", date: "06.03.2025", response: "Кайфуй, братишка! Шоп не подведёт!" },
        { text: "Клад на магните, снял за секунду, стафф огонь!", date: "10.03.2025", response: "Респект тебе, возвращайся за свежаком!" },
        { text: "Клад на месте, место людное, стафф терпимый.", date: "04.03.2025", response: "Сорян за неудобства, учтём твои слова!" },
        { text: "Искал 40 минут, клад хуй знает где, развод!", date: "08.03.2025", response: "Разберёмся с качеством, извини за фейл!" }
    ],
    "amph-4": [
        { text: "Точка точная, эффект мощный, ребята красавцы!", date: "01.03.2025", response: "Стафф для ценителей, ждём тебя ещё!" },
        { text: "Стафф свежий, клад лёгкий, шоп — номер один!", date: "05.03.2025", response: "Спасибо за отзыв, братан! Шоп на высоте!" },
        { text: "Всё по красоте, снял быстро, качество топ!", date: "09.03.2025", response: "Спасибо, братишка! Заходи ещё, всегда рады!" },
        { text: "Стафф норм, но искать задолбался, корды хуйня.", date: "03.03.2025", response: "Поправим всё, братишка, держи связь!" },
        { text: "Стафф просроченный, эффекта нет, пиздец шопу!", date: "11.03.2025", response: "Поправим всё, братишка, спасибо, что написал!" }
    ],
    "amph-5": [
        { text: "На месте без лишних поисков, стафф штырит!", date: "07.03.2025", response: "Рады, что зашло! Бери снова, не пожалеешь!" },
        { text: "Клад как на блюдечке, эффект пиздец, берите!", date: "12.03.2025", response: "Топчик для топовых ребят, ждём тебя обратно!" },
        { text: "Касание за 5 минут, стафф пушка, берите смело!", date: "04.03.2025", response: "На здоровье, братишка! Новые поставки скоро!" },
        { text: "Всё в наличии, но эффект слабый, за цену ок.", date: "08.03.2025", response: "Спасибо, что указал, шоп на чеку!" },
        { text: "Клад в говне, вонь пиздец, стафф не работает.", date: "02.03.2025", response: "Извини за гемор, локацию проверим!" }
    ],
    "meth-1": [
        { text: "Всё чётко, клад на месте, качество на высоте!", date: "06.03.2025", response: "Кайфуй, братан! Шоп всегда для тебя открыт!" },
        { text: "Съём лёгкий, ориентиры точные, эффект лютый.", date: "10.03.2025", response: "Спасибо за отзыв, держим марку, возвращайся!" },
        { text: "На месте, как в аптеке, шоп — топчик!", date: "13.03.2025", response: "Рады стараться, бери ещё, всё будет чётко!" },
        { text: "Клад ок, но место людное, качество среднее.", date: "01.03.2025", response: "Проверим партию, извини за косяк, исправимся!" },
        { text: "Корды пиздец, искал зря, качество дно.", date: "05.03.2025", response: "Стафф подтянем, сорян за разочарование!" }
    ],
    "meth-2": [
        { text: "Клад идеальный, стафф свежий, 10/10!", date: "03.03.2025", response: "Зачёт тебе, братишка! Ждём новых заказов!" },
        { text: "Нашёл за минуту, описание огонь, рекомендую!", date: "07.03.2025", response: "Стафф для своих, заходи, не стесняйся!" },
        { text: "Стафф бодрый, координаты точные, спасибо, ребята!", date: "11.03.2025", response: "Спасибо за добрые слова, шоп в деле!" },
        { text: "Съём норм, описание мутное, стафф рабочий.", date: "09.03.2025", response: "Спасибо за сигнал, работаем над улучшениями!" },
        { text: "Место опасное, чуть не спалили, стафф отстой.", date: "04.03.2025", response: "Спасибо за честность, шоп исправится!" }
    ],
    "meth-3": [
        { text: "Всё как надо, эффект мощный, беру второй раз!", date: "08.03.2025", response: "Кайфуй на полную, братишка! Всё для вас!" },
        { text: "Клад в касание, качество пиздец как радует!", date: "12.03.2025", response: "Респект за фидбек, ждём тебя снова!" },
        { text: "Шоп знает своё дело, стафф чистый, съём быстрый!", date: "02.03.2025", response: "Ты знаешь толк, возвращайся за добавкой!" },
        { text: "Нашёл, но ожидал большего от эффекта.", date: "06.03.2025", response: "Принято, уточним корды, держи нас в курсе!" },
        { text: "Съём — ад, описание хуйня, стафф слабый.", date: "10.03.2025", response: "Проверим тайник, извини за пиздец!" }
    ],
    "meth-4": [
        { text: "На месте через 10 минут, эффект штырит, топ!", date: "01.03.2025", response: "Спасибо, что с нами! Шоп всегда на связи!" },
        { text: "Ориентиры как по учебнику, стафф лютый, зачёт!", date: "05.03.2025", response: "Рады угодить, братан! Бери ещё, будет пушка!" },
        { text: "Взял без проблем, качество выше ожиданий!", date: "09.03.2025", response: "Заходи снова, братишка! Всё для твоего кайфа!" },
        { text: "Коорды точные, а стафф слабоват, пойдёт.", date: "03.03.2025", response: "Проверим место, сорян за неудобства!" },
        { text: "Клад у дороги, снял с риском, качество шлак.", date: "07.03.2025", response: "Не злись, братан, косяк на нас, исправим!" }
    ],
    "meth-5": [
        { text: "Клад на точке, стафф свежак, шопу респект!", date: "11.03.2025", response: "Ты в теме, шоп для тебя, ждём обратно!" },
        { text: "Съём чёткий, эффект долгий, буду брать ещё!", date: "04.03.2025", response: "Спасибо за поддержку, держим уровень!" },
        { text: "Нашёл сразу, упаковка норм, стафф пиздатый!", date: "08.03.2025", response: "Кайфуй, братишка! Шоп не подведёт!" },
        { text: "Всё нашёл, эффект средний, за эти бабки норм.", date: "02.03.2025", response: "Спасибо, что написал, подтянем качество!" },
        { text: "Стафф не тянет, место пиздец, шоп подвёл!", date: "06.03.2025", response: "Сорян за кривые корды, уточним всё!" }
    ],
    "meph-1": [
        { text: "Коорды идеальные, качество на уровне, доволен!", date: "10.03.2025", response: "Респект тебе, возвращайся за свежаком!" },
        { text: "Всё в лучшем виде, стафф рвёт, шоп надёжный!", date: "13.03.2025", response: "Стафф для ценителей, ждём тебя ещё!" },
        { text: "Клад на магните, снял за секунду, стафф огонь!", date: "01.03.2025", response: "Спасибо за отзыв, братан! Шоп на высоте!" },
        { text: "Съём долгий, минут 15 искал, качество сойдёт.", date: "05.03.2025", response: "Будем точнее, братишка, извини за мутки!" },
        { text: "Искал два часа, корды фуфло, разочарование.", date: "09.03.2025", response: "Разберёмся с местом, извини за неудобства!" }
    ],
    "meph-2": [
        { text: "Точка точная, эффект мощный, ребята красавцы!", date: "03.03.2025", response: "Спасибо, братишка! Заходи ещё, всегда рады!" },
        { text: "Стафф свежий, клад лёгкий, шоп — номер один!", date: "07.03.2025", response: "Рады, что зашло! Бери снова, не пожалеешь!" },
        { text: "Всё по красоте, снял быстро, качество топ!", date: "11.03.2025", response: "Топчик для топовых ребят, ждём тебя обратно!" },
        { text: "Ориентиры путаные, но стафф в порядке.", date: "04.03.2025", response: "Поправим тайник, спасибо за терпение!" },
        { text: "Место стремное, стафф как пыль, не берите!", date: "08.03.2025", response: "Проверим партию, спасибо, что указал!" }
    ],
    "meph-3": [
        { text: "На месте без лишних поисков, стафф штырит!", date: "02.03.2025", response: "На здоровье, братишка! Новые поставки скоро!" },
        { text: "Клад как на блюдечке, эффект пиздец, берите!", date: "06.03.2025", response: "Кайфуй, братан! Шоп всегда для тебя открыт!" },
        { text: "Касание за 5 минут, стафф пушка, берите смело!", date: "10.03.2025", response: "Спасибо за отзыв, держим марку, возвращайся!" },
        { text: "На точке, упаковка так себе, эффект не вау.", date: "01.03.2025", response: "Учтём твои слова, шоп в деле, не переживай!" },
        { text: "Клад потерял час, качество дерьмо, пиздец!", date: "05.03.2025", response: "Извинения наши, братишка, шоп починит косяки!" }
    ],
    "meph-4": [
        { text: "Всё чётко, клад на месте, качество на высоте!", date: "09.03.2025", response: "Рады стараться, бери ещё, всё будет чётко!" },
        { text: "Съём лёгкий, ориентиры точные, эффект лютый.", date: "13.03.2025", response: "Зачёт тебе, братишка! Ждём новых заказов!" },
        { text: "На месте, как в аптеке, шоп — топчик!", date: "03.03.2025", response: "Стафф для своих, заходи, не стесняйся!" },
        { text: "Клад нашёл, но место стремноватое, стафф норм.", date: "07.03.2025", response: "Проверим стафф, извини, если не зашло!" },
        { text: "Стафф никакой, место хуйня, шоп — наебалово!", date: "11.03.2025", response: "Сделаем лучше, сорян за факап, держись!" }
    ],
    "meph-5": [
        { text: "Клад идеальный, стафф свежий, 10/10!", date: "04.03.2025", response: "Спасибо за добрые слова, шоп в деле!" },
        { text: "Нашёл за минуту, описание огонь, рекомендую!", date: "08.03.2025", response: "Кайфуй на полную, братишка! Всё для вас!" },
        { text: "Стафф бодрый, координаты точные, спасибо, ребята!", date: "12.03.2025", response: "Респект за фидбек, ждём тебя снова!" },
        { text: "Стафф рабочий, но искал долго, корды нечёткие.", date: "02.03.2025", response: "Спасибо за честность, будем лучше!" },
        { text: "Место пиздец, чуть не спалился, стафф говно.", date: "06.03.2025", response: "Спасибо за фидбек, всё поправим, не кипишуй!" }
    ],
    "alpha-1": [
        { text: "Всё как надо, эффект мощный, беру второй раз!", date: "10.03.2025", response: "Ты знаешь толк, возвращайся за добавкой!" },
        { text: "Клад в касание, качество пиздец как радует!", date: "01.03.2025", response: "Спасибо, что с нами! Шоп всегда на связи!" },
        { text: "Шоп знает своё дело, стафф чистый, съём быстрый!", date: "05.03.2025", response: "Рады угодить, братан! Бери ещё, будет пушка!" },
        { text: "Клад был, искал полчаса, стафф не разочаровал.", date: "09.03.2025", response: "Сделаем работу над ошибками, держись с нами!" },
        { text: "Клад у мусорки, вонь пиздец, качество отстой.", date: "03.03.2025", response: "Извини за косяк, исправим локацию, братишка!" }
    ],
    "alpha-2": [
        { text: "На месте через 10 минут, эффект штырит, топ!", date: "07.03.2025", response: "Заходи снова, братишка! Всё для твоего кайфа!" },
        { text: "Ориентиры как по учебнику, стафф лютый, зачёт!", date: "11.03.2025", response: "Ты в теме, шоп для тебя, ждём обратно!" },
        { text: "Взял без проблем, качество выше ожиданий!", date: "04.03.2025", response: "Спасибо за поддержку, держим уровень!" },
        { text: "Ориентиры так себе, но стафф рабочий, берите.", date: "08.03.2025", response: "Принято к сведению, братан, исправим косяки!" },
        { text: "Искал час, корды кривые, стафф не тянет.", date: "02.03.2025", response: "Проверим качество, спасибо за инфу, разберёмся!" }
    ],
    "alpha-3": [
        { text: "Клад на точке, стафф свежак, шопу респект!", date: "06.03.2025", response: "Кайфуй, братишка! Шоп не подведёт!" },
        { text: "Съём чёткий, эффект долгий, буду брать ещё!", date: "10.03.2025", response: "Респект тебе, возвращайся за свежаком!" },
        { text: "Нашёл сразу, упаковка норм, стафф пиздатый!", date: "13.03.2025", response: "Стафф для ценителей, ждём тебя ещё!" },
        { text: "На месте, но искал минут 20, стафф нормальный.", date: "01.03.2025", response: "Спасибо за подсказку, точность улучшим!" },
        { text: "Стафф слабый, за такие бабки — наебалово!", date: "05.03.2025", response: "Поправим место, не злись, всё наладим!" }
    ],
    "alpha-4": [
        { text: "Коорды идеальные, качество на уровне, доволен!", date: "09.03.2025", response: "Спасибо за отзыв, братан! Шоп на высоте!" },
        { text: "Всё в лучшем виде, стафф рвёт, шоп надёжный!", date: "03.03.2025", response: "Спасибо, братишка! Заходи ещё, всегда рады!" },
        { text: "Клад на магните, снял за секунду, стафф огонь!", date: "07.03.2025", response: "Рады, что зашло! Бери снова, не пожалеешь!" },
        { text: "Съём норм, описание мутное, стафф рабочий.", date: "11.03.2025", response: "Проверим локацию, извини за гемор!" },
        { text: "Место стремное, чуть не попался, шлак полный.", date: "04.03.2025", response: "Сорян за неудобства, будем лучше, держись!" }
    ],
    "alpha-5": [
        { text: "Точка точная, эффект мощный, ребята красавцы!", date: "08.03.2025", response: "Топчик для топовых ребят, ждём тебя обратно!" },
        { text: "Стафф свежий, клад лёгкий, шоп — номер один!", date: "12.03.2025", response: "На здоровье, братишка! Новые поставки скоро!" },
        { text: "Всё по красоте, снял быстро, качество топ!", date: "02.03.2025", response: "Кайфуй, братан! Шоп всегда для тебя открыт!" },
        { text: "Клад ок, но место людное, качество среднее.", date: "06.03.2025", response: "Будем работать над этим, спасибо за отзыв!" },
        { text: "Клад не нашёл, описание хуйня, выбросил время!", date: "10.03.2025", response: "Приносим извинения, уточним корды, не переживай!" }
    ],
    "lsd-1": [
        { text: "На месте без лишних поисков, стафф штырит!", date: "01.03.2025", response: "Спасибо за отзыв, держим марку, возвращайся!" },
        { text: "Клад как на блюдечке, эффект пиздец, берите!", date: "05.03.2025", response: "Рады стараться, бери ещё, всё будет чётко!" },
        { text: "Касание за 5 минут, стафф пушка, берите смело!", date: "09.03.2025", response: "Зачёт тебе, братишка! Ждём новых заказов!" },
        { text: "Нашёл, но ожидал большего от эффекта.", date: "03.03.2025", response: "Сорян за неудобства, учтём твои слова!" },
        { text: "Стафф как мел, эффекта ноль, шоп — днище.", date: "07.03.2025", response: "Проверим стафф, извини, что подвели!" }
    ],
    "lsd-2": [
        { text: "Всё чётко, клад на месте, качество на высоте!", date: "11.03.2025", response: "Стафф для своих, заходи, не стесняйся!" },
        { text: "Съём лёгкий, ориентиры точные, эффект лютый.", date: "04.03.2025", response: "Спасибо за добрые слова, шоп в деле!" },
        { text: "На месте, как в аптеке, шоп — топчик!", date: "08.03.2025", response: "Кайфуй на полную, братишка! Всё для вас!" },
        { text: "Коорды точные, а стафф слабоват, пойдёт.", date: "02.03.2025", response: "Спасибо за сигнал, работаем над улучшениями!" },
        { text: "Место людное, снял с нервами, качество херня.", date: "06.03.2025", response: "Спасибо за сигнал, место поменяем, братан!" }
    ],
    "lsd-3": [
        { text: "Клад идеальный, стафф свежий, 10/10!", date: "10.03.2025", response: "Респект за фидбек, ждём тебя снова!" },
        { text: "Нашёл за минуту, описание огонь, рекомендую!", date: "13.03.2025", response: "Ты знаешь толк, возвращайся за добавкой!" },
        { text: "Стафф бодрый, координаты точные, спасибо, ребята!", date: "01.03.2025", response: "Спасибо, что с нами! Шоп всегда на связи!" },
        { text: "Съём долгий, минут 15 искал, качество сойдёт.", date: "05.03.2025", response: "Сделаем выводы, братан, спасибо за инфу!" },
        { text: "Искал 40 минут, клад хуй знает где, развод!", date: "09.03.2025", response: "Сорян, косяк наш, исправим, не грусти!" }
    ],
    "lsd-4": [
        { text: "Всё как надо, эффект мощный, беру второй раз!", date: "03.03.2025", response: "Рады угодить, братан! Бери ещё, будет пушка!" },
        { text: "Клад в касание, качество пиздец как радует!", date: "07.03.2025", response: "Заходи снова, братишка! Всё для твоего кайфа!" },
        { text: "Шоп знает своё дело, стафф чистый, съём быстрый!", date: "11.03.2025", response: "Ты в теме, шоп для тебя, ждём обратно!" },
        { text: "Ориентиры путаные, но стафф в порядке.", date: "04.03.2025", response: "Проверим место, сорян за неудобства!" },
        { text: "Стафф просроченный, эффекта нет, пиздец шопу!", date: "08.03.2025", response: "Разберёмся с качеством, извини за фейл!" }
    ],
    "lsd-5": [
        { text: "На месте через 10 минут, эффект штырит, топ!", date: "02.03.2025", response: "Спасибо за поддержку, держим уровень!" },
        { text: "Ориентиры как по учебнику, стафф лютый, зачёт!", date: "06.03.2025", response: "Кайфуй, братишка! Шоп не подведёт!" },
        { text: "Взял без проблем, качество выше ожиданий!", date: "10.03.2025", response: "Респект тебе, возвращайся за свежаком!" },
        { text: "На точке, упаковка так себе, эффект не вау.", date: "01.03.2025", response: "Спасибо, что написал, подтянем качество!" },
        { text: "Клад в говне, вонь пиздец, стафф не работает.", date: "05.03.2025", response: "Поправим всё, братишка, спасибо, что написал!" }
    ],
    "mdma-1": [
        { text: "Клад на точке, стафф свежак, шопу респект!", date: "09.03.2025", response: "Стафф для ценителей, ждём тебя ещё!" },
        { text: "Съём чёткий, эффект долгий, буду брать ещё!", date: "13.03.2025", response: "Спасибо за отзыв, братан! Шоп на высоте!" },
        { text: "Нашёл сразу, упаковка норм, стафф пиздатый!", date: "03.03.2025", response: "Спасибо, братишка! Заходи ещё, всегда рады!" },
        { text: "Клад нашёл, но место стремноватое, стафф норм.", date: "07.03.2025", response: "Будем точнее, братишка, извини за мутки!" },
        { text: "Корды пиздец, искал зря, качество дно.", date: "11.03.2025", response: "Извини за гемор, локацию проверим!" }
    ],
    "mdma-2": [
        { text: "Коорды идеальные, качество на уровне, доволен!", date: "04.03.2025", response: "Рады, что зашло! Бери снова, не пожалеешь!" },
        { text: "Всё в лучшем виде, стафф рвёт, шоп надёжный!", date: "08.03.2025", response: "Топчик для топовых ребят, ждём тебя обратно!" },
        { text: "Клад на магните, снял за секунду, стафф огонь!", date: "12.03.2025", response: "На здоровье, братишка! Новые поставки скоро!" },
        { text: "Стафф рабочий, но искал долго, корды нечёткие.", date: "02.03.2025", response: "Поправим тайник, спасибо за терпение!" },
        { text: "Место опасное, чуть не спалили, стафф отстой.", date: "06.03.2025", response: "Стафф подтянем, сорян за разочарование!" }
    ],
    "mdma-3": [
        { text: "Точка точная, эффект мощный, ребята красавцы!", date: "10.03.2025", response: "Кайфуй, братан! Шоп всегда для тебя открыт!" },
        { text: "Стафф свежий, клад лёгкий, шоп — номер один!", date: "01.03.2025", response: "Спасибо за отзыв, держим марку, возвращайся!" },
        { text: "Всё по красоте, снял быстро, качество топ!", date: "05.03.2025", response: "Рады стараться, бери ещё, всё будет чётко!" },
        { text: "Всё ок, но эффект быстро прошёл, среднячок.", date: "09.03.2025", response: "Учтём твои слова, шоп в деле, не переживай!" },
        { text: "Съём — ад, описание хуйня, стафф слабый.", date: "03.03.2025", response: "Спасибо за честность, шоп исправится!" }
    ],
    "mdma-4": [
        { text: "На месте без лишних поисков, стафф штырит!", date: "07.03.2025", response: "Зачёт тебе, братишка! Ждём новых заказов!" },
        { text: "Клад как на блюдечке, эффект пиздец, берите!", date: "11.03.2025", response: "Стафф для своих, заходи, не стесняйся!" },
        { text: "Касание за 5 минут, стафф пушка, берите смело!", date: "04.03.2025", response: "Спасибо за добрые слова, шоп в деле!" },
        { text: "На месте, но искал минут 20, стафф нормальный.", date: "08.03.2025", response: "Проверим стафф, извини, если не зашло!" },
        { text: "Клад у дороги, снял с риском, качество шлак.", date: "02.03.2025", response: "Проверим тайник, извини за пиздец!" }
    ],
    "mdma-5": [
        { text: "Всё чётко, клад на месте, качество на высоте!", date: "06.03.2025", response: "Кайфуй на полную, братишка! Всё для вас!" },
        { text: "Съём лёгкий, ориентиры точные, эффект лютый.", date: "10.03.2025", response: "Респект за фидбек, ждём тебя снова!" },
        { text: "На месте, как в аптеке, шоп — топчик!", date: "13.03.2025", response: "Ты знаешь толк, возвращайся за добавкой!" },
        { text: "Клад ок, но место людное, качество среднее.", date: "01.03.2025", response: "Спасибо за сигнал, работаем над улучшениями!" },
        { text: "Стафф не тянет, место пиздец, шоп подвёл!", date: "05.03.2025", response: "Не злись, братан, косяк на нас, исправим!" }
    ],
    "heroin-1": [
        { text: "Клад идеальный, стафф свежий, 10/10!", date: "09.03.2025", response: "Спасибо, что с нами! Шоп всегда на связи!" },
        { text: "Нашёл за минуту, описание огонь, рекомендую!", date: "03.03.2025", response: "Рады угодить, братан! Бери ещё, будет пушка!" },
        { text: "Стафф бодрый, координаты точные, спасибо, ребята!", date: "07.03.2025", response: "Заходи снова, братишка! Всё для твоего кайфа!" },
        { text: "Съём норм, описание мутное, стафф рабочий.", date: "11.03.2025", response: "Сделаем выводы, братан, спасибо за инфу!" },
        { text: "Место стремное, стафф как пыль, не берите!", date: "04.03.2025", response: "Сорян за кривые корды, уточним всё!" }
    ],
    "heroin-2": [
        { text: "Всё как надо, эффект мощный, беру второй раз!", date: "08.03.2025", response: "Ты в теме, шоп для тебя, ждём обратно!" },
        { text: "Клад в касание, качество пиздец как радует!", date: "12.03.2025", response: "Спасибо за поддержку, держим уровень!" },
        { text: "Шоп знает своё дело, стафф чистый, съём быстрый!", date: "02.03.2025", response: "Кайфуй, братишка! Шоп не подведёт!" },
        { text: "Нашёл, но ожидал большего от эффекта.", date: "06.03.2025", response: "Принято, уточним корды, держи нас в курсе!" },
        { text: "Клад потерял час, качество дерьмо, пиздец!", date: "10.03.2025", response: "Разберёмся с местом, извини за неудобства!" }
    ],
    "heroin-3": [
        { text: "На месте через 10 минут, эффект штырит, топ!", date: "01.03.2025", response: "Респект тебе, возвращайся за свежаком!" },
        { text: "Ориентиры как по учебнику, стафф лютый, зачёт!", date: "05.03.2025", response: "Стафф для ценителей, ждём тебя ещё!" },
        { text: "Взял без проблем, качество выше ожиданий!", date: "09.03.2025", response: "Спасибо за отзыв, братан! Шоп на высоте!" },
        { text: "Коорды точные, а стафф слабоват, пойдёт.", date: "03.03.2025", response: "Проверим место, сорян за неудобства!" },
        { text: "Стафф никакой, место хуйня, шоп — наебалово!", date: "07.03.2025", response: "Проверим партию, спасибо, что указал!" }
    ],
    "heroin-4": [
        { text: "Клад на точке, стафф свежак, шопу респект!", date: "11.03.2025", response: "Спасибо, братишка! Заходи ещё, всегда рады!" },
        { text: "Съём чёткий, эффект долгий, буду брать ещё!", date: "04.03.2025", response: "Рады, что зашло! Бери снова, не пожалеешь!" },
        { text: "Нашёл сразу, упаковка норм, стафф пиздатый!", date: "08.03.2025", response: "Топчик для топовых ребят, ждём тебя обратно!" },
        { text: "Съём долгий, минут 15 искал, качество сойдёт.", date: "02.03.2025", response: "Спасибо, что написал, подтянем качество!" },
        { text: "Место пиздец, чуть не спалился, стафф говно.", date: "06.03.2025", response: "Извинения наши, братишка, шоп починит косяки!" }
    ],
    "heroin-5": [
        { text: "Коорды идеальные, качество на уровне, доволен!", date: "10.03.2025", response: "На здоровье, братишка! Новые поставки скоро!" },
        { text: "Всё в лучшем виде, стафф рвёт, шоп надёжный!", date: "13.03.2025", response: "Кайфуй, братан! Шоп всегда для тебя открыт!" },
        { text: "Клад на магните, снял за секунду, стафф огонь!", date: "01.03.2025", response: "Спасибо за отзыв, держим марку, возвращайся!" },
        { text: "Ориентиры так себе, но стафф рабочий, берите.", date: "05.03.2025", response: "Будем точнее, братишка, извини за мутки!" },
        { text: "Искал час, корды кривые, стафф не тянет.", date: "09.03.2025", response: "Сделаем лучше, сорян за факап, держись!" }
    ]
};

        function loadLanguage() {
            const lang = translations[userLanguage];
            document.getElementById('promoBanner').innerText = lang.promoBanner;
            document.getElementById('headerText').innerText = lang.headerText;
            document.getElementById('catalogButton').innerText = lang.catalogButton;
            document.getElementById('vacanciesButton').innerText = lang.vacanciesButton;
            document.getElementById('mailButton').innerText = lang.mailButton;
            document.getElementById('allCitiesOption').innerText = lang.allCitiesOption;
            document.getElementById('phuketOption').innerText = lang.phuketOption;
            document.getElementById('pattayaOption').innerText = lang.pattayaOption;
            document.getElementById('bangkokOption').innerText = lang.bangkokOption;
            document.getElementById('samuiOption').innerText = lang.samuiOption;
            document.getElementById('allDistrictsOption').innerText = lang.allDistrictsOption;
            document.getElementById('weedDesc').innerText = lang.weedDesc;
            document.getElementById('profileNameLabel').innerText = lang.profileNameLabel + (currentUser || 'Гость');
            document.getElementById('ordersLabel').innerText = lang.ordersLabel + orderCount;
            document.getElementById('referralsLabel').innerText = lang.referralsLabel + referralCount;
            document.getElementById('depositTitle').innerText = lang.depositTitle;
            document.getElementById('orderHistoryTitle').innerText = lang.orderHistoryTitle;
            document.getElementById('vacanciesTitle').innerText = lang.vacanciesTitle;
            document.getElementById('courierTitle').innerText = lang.courierTitle;
            document.getElementById('courierDuties').innerText = lang.courierDuties;
            document.getElementById('courierPay').innerText = lang.courierPay;
            document.getElementById('warehousemanTitle').innerText = lang.warehousemanTitle;
            document.getElementById('warehousemanDuties').innerText = lang.warehousemanDuties;
            document.getElementById('warehousemanPay').innerText = lang.warehousemanPay;
            document.getElementById('transporterTitle').innerText = lang.transporterTitle;
            document.getElementById('transporterDuties').innerText = lang.transporterDuties;
            document.getElementById('transporterPay').innerText = lang.transporterPay;
            document.getElementById('smmTitle').innerText = lang.smmTitle;
            document.getElementById('smmDuties').innerText = lang.smmDuties;
            document.getElementById('smmPay').innerText = lang.smmPay;
            document.getElementById('applyButton1').innerText = lang.applyButton;
            document.getElementById('applyButton2').innerText = lang.applyButton;
            document.getElementById('applyButton3').innerText = lang.applyButton;
            document.getElementById('applyButton4').innerText = lang.applyButton;
            document.getElementById('mailTitle').innerText = lang.mailTitle;
            document.getElementById('weedTab').innerText = lang.weedTab;
            document.getElementById('hashTab').innerText = lang.hashTab;
            document.getElementById('cokeTab').innerText = lang.cokeTab;
            document.getElementById('amphTab').innerText = lang.amphTab;
            document.getElementById('methTab').innerText = lang.methTab;
            document.getElementById('mephTab').innerText = lang.mephTab;
            document.getElementById('alphaTab').innerText = lang.alphaTab;
            document.getElementById('lsdTab').innerText = lang.lsdTab;
            document.getElementById('mdmaTab').innerText = lang.mdmaTab;
            document.getElementById('heroinTab').innerText = lang.heroinTab;
            document.getElementById('promoInfo').innerText = lang.promoInfo;
            updateOrderHistory();
            updateMailList();
            updateTabs();
            updateProductCards();
        }

        function updateDistricts() {
            const districtSelect = document.getElementById('districtSelect');
            districtSelect.innerHTML = `<option value="all">${translations[userLanguage].allDistrictsOption}</option>`;
            if (selectedCity !== 'all' && cities[selectedCity]) {
                const districts = translations[userLanguage][`${selectedCity}Districts`];
                for (let district in districts) {
                    districtSelect.innerHTML += `<option value="${district}">${districts[district]}</option>`;
                }
            }
            filterByDistrict();
        }

        function filterByCity() {
    selectedCity = document.getElementById('citySelect').value;
    updateDistricts();
    filterProducts();
    sendToTelegram(`Юзер ${currentUser || 'Гость'} выбрал город: ${translations[userLanguage][`${selectedCity}Option`]}`);
}

function filterByDistrict() {
    selectedDistrict = document.getElementById('districtSelect').value;
    filterProducts();
    sendToTelegram(`Юзер ${currentUser || 'Гость'} выбрал район: ${translations[userLanguage][`${selectedCity}Districts`][selectedDistrict] || 'Все районы'} в ${translations[userLanguage][`${selectedCity}Option`]}`);
}

        function filterProducts() {
            const products = document.querySelectorAll('.product-card');
            products.forEach(card => {
                const productId = card.dataset.product;
                const [category, id] = productId.split('-');
                const availableCities = Object.keys(cities);
                let isVisible = true;

                if (selectedCity !== 'all') {
                    if (!availableCities.includes(selectedCity)) {
                        isVisible = false;
                    } else if (selectedDistrict !== 'all' && !cities[selectedCity][selectedDistrict]) {
                        isVisible = false;
                    }
                }

                card.style.display = isVisible ? 'block' : 'none';
            });
        }

        function toggleCatalog() {
            const catalogMenu = document.getElementById('catalogMenu');
            const profileMenu = document.getElementById('profileMenu');
            const vacancyMenu = document.getElementById('vacancyMenu');
            const mailMenu = document.getElementById('mailMenu');
            catalogMenu.style.display = catalogMenu.style.display === 'block' ? 'none' : 'block';
            profileMenu.style.display = 'none';
            vacancyMenu.style.display = 'none';
            mailMenu.style.display = 'none';
            updateTabs();
        }

        function toggleProfile() {
            const profileMenu = document.getElementById('profileMenu');
            const catalogMenu = document.getElementById('catalogMenu');
            const vacancyMenu = document.getElementById('vacancyMenu');
            const mailMenu = document.getElementById('mailMenu');
            profileMenu.style.display = profileMenu.style.display === 'block' ? 'none' : 'block';
            catalogMenu.style.display = 'none';
            vacancyMenu.style.display = 'none';
            mailMenu.style.display = 'none';
            if (!currentUser) showRegistrationModal();
        }

        function toggleVacancies() {
            const vacancyMenu = document.getElementById('vacancyMenu');
            const catalogMenu = document.getElementById('catalogMenu');
            const profileMenu = document.getElementById('profileMenu');
            const mailMenu = document.getElementById('mailMenu');
            vacancyMenu.style.display = vacancyMenu.style.display === 'block' ? 'none' : 'block';
            catalogMenu.style.display = 'none';
            profileMenu.style.display = 'none';
            mailMenu.style.display = 'none';
        }

        function toggleMail() {
            const mailMenu = document.getElementById('mailMenu');
            const catalogMenu = document.getElementById('catalogMenu');
            const profileMenu = document.getElementById('profileMenu');
            const vacancyMenu = document.getElementById('vacancyMenu');
            mailMenu.style.display = mailMenu.style.display === 'block' ? 'none' : 'block';
            catalogMenu.style.display = 'none';
            profileMenu.style.display = 'none';
            vacancyMenu.style.display = 'none';
            updateMailList();
        }

        function updateTabs() {
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    tabContents.forEach(content => content.style.display = 'none');
                    document.getElementById(tab.dataset.tab).style.display = 'block';
                    filterProducts();
                });
            });
            if (!document.querySelector('.tab.active')) {
                tabs[0].classList.add('active');
                tabContents[0].style.display = 'block';
            }
            filterProducts();
        }

        function updateProductCards() {
    const lang = translations[userLanguage];
    const products = document.querySelectorAll('.product-card');
    products.forEach(card => {
        const productId = card.dataset.product;
        const [category, id] = productId.split('-');
        const basePrice = basePrices[category][id];
        const image = productImages[category][id];
        const name = card.querySelector('h3').innerText;
        const description = card.querySelector('p').innerText;

        card.innerHTML = `
            <img src="${image}" class="product-image" alt="${name}">
            <h3 onclick="showProductModal('${category}', ${id})">${name}</h3>
            <p>${description}</p>
            <p class="price">${lang.positionPrice} ${basePrice} ฿/г</p>
            <p class="crypto-price">~${(basePrice / cryptoRates.USDT).toFixed(2)} USDT/г</p>
        `;
    });
}

        function showProductModal(category, id) {
    const lang = translations[userLanguage];
    const productCard = document.querySelector(`[data-product="${category}-${id}"]`);
    const name = productCard.querySelector('h3').innerText;
    const shortDesc = productCard.querySelector('p').innerText;
    const basePrice = basePrices[category][id];
    const weightsList = (category === 'coke') ? weights.coke : (category === 'lsd' ? weights.lsd : (category === 'mdma' && id === '3' ? weights.mdmaTabs : weights.default));
    const image = productImages[category][id];
    const detailedDesc = `${shortDesc}. Этот продукт — чистый кайф для тех, кто знает толк в стаффе. Произведён с душой, доставка в твой район.`;

    // Уведомление о просмотре
    sendToTelegram(`Юзер ${currentUser || 'Гость'} смотрит товар: ${name} (категория: ${translations[userLanguage][`${category}Tab`]})`);

    let content = `
        <img src="${image}" class="product-image" alt="${name}">
        <h2>${name}</h2>
        <p>${detailedDesc}</p>
    `;

    if (selectedCity === 'all' || selectedDistrict === 'all') {
        content += `
            <p>Выбери город и район, чтобы увидеть позиции.</p>
            <button class="buy-button" onclick="closeModal('productModal')">${lang.close}</button>
        `;
    } else {
        const cityName = translations[userLanguage][`${selectedCity}Option`];
        const districtName = translations[userLanguage][`${selectedCity}Districts`][selectedDistrict];
        content += `<h3>${cityName} - ${districtName}</h3>`;

        weightsList.forEach(weight => {
            // Проверяем, что это OG Kush (weed-1), город Пхукет и вес 1 г
            let inStock;
            if (category === 'weed' && id === 1 && selectedCity === 'phuket' && weight === 1) {
                inStock = false; // Нет в наличии для OG Kush 1 г на Пхукете
            } else {
                inStock = (weight === 0.5 || weight === 1) ? true : Math.random() > 0.2; // Оригинальная логика для других случаев
            }

            const price = Math.round(basePrice * weight);
            const preorderPrice = Math.round(price * 1.3); // Предзаказ с наценкой 30%

            content += `
                <p>${lang.positionWeight}: ${weight} г | ${lang.positionPrice}: ${price} ฿ (~${(price / cryptoRates.USDT).toFixed(2)} USDT) | 
                ${lang.positionAvailability}: ${inStock ? lang.inStock : lang.outOfStock}</p>
            `;
            if (inStock) {
                content += `<button class="buy-button" onclick="buyProduct('${category}', ${id}, '${selectedCity}', '${selectedDistrict}', ${weight}, ${price})">${lang.buyButton}</button>`;
            }
            content += `<button class="preorder-button" onclick="preorderProduct('${category}', ${id}, '${selectedCity}', '${selectedDistrict}', ${weight}, ${preorderPrice})">${lang.preorderButton}</button>`;
        });
    }

    // Добавляем отзывы
    content += `
        <h3>${lang.reviewsTitle}</h3>
        <div id="reviews">
    `;
    const productReviews = reviews[`${category}-${id}`];
    if (productReviews && productReviews.length) { // Проверяем, что отзывы существуют и не пустые
        content += productReviews.map(review => `
            <div class="review">
                <div class="review-text">${review.text}</div>
                <div class="review-date">${review.date}</div>
            </div>
            <div class="moderator-response">${review.response}</div>
        `).join('');
    } else {
        content += lang.noReviews;
    }
    content += `
        </div>
        <button class="buy-button" onclick="closeModal('productModal')">${lang.close}</button>
    `;
    document.getElementById('productContent').innerHTML = content;
    document.getElementById('productModal').style.display = 'flex';
}

// Обновляем buyProduct для работы с конкретным городом, районом и весом
function buyProduct(category, id, city, district, weight, price) {
    const lang = translations[userLanguage];
    if (balance >= price) {
        balance -= price;
        const userIndex = registeredUsers.findIndex(u => u.nickname === currentUser);
        if (userIndex !== -1) {
            registeredUsers[userIndex].orderCount = (registeredUsers[userIndex].orderCount || 0) + 1;
            orderCount = registeredUsers[userIndex].orderCount; // Обновляем локально
        }
        const order = {
            id: orderCount,
            product: `${category}-${id}`,
            weight: weight,
            price: price,
            date: new Date().toLocaleString(),
            city: city,
            district: district
        };
        orderHistory.push(order);
        updateOrderHistory();
        document.getElementById('balance').innerText = `${balance} ฿`;
        document.getElementById('ordersLabel').innerText = lang.ordersLabel + orderCount;
        showPaymentModal(order);
        sendToTelegram(`New order #${order.id}: ${order.product}, ${order.weight}g, ${order.price} ฿, ${order.city}/${order.district}`);
        updateUserData();
    } else {
        showConfirmModal(lang.insufficientFunds, () => showDepositModal('USDT'), () => closeModal('confirmModal'));
    }
    closeModal('productModal');
}
// Обновляем preorderProduct
function preorderProduct(category, id, city, district, weight, price) {
    const lang = translations[userLanguage];
    const totalPrice = Math.round(price);
    if (balance >= totalPrice) {
        balance -= totalPrice;
        const userIndex = registeredUsers.findIndex(u => u.nickname === currentUser);
        if (userIndex !== -1) {
            registeredUsers[userIndex].orderCount = (registeredUsers[userIndex].orderCount || 0) + 1;
            orderCount = registeredUsers[userIndex].orderCount;
        }
        const order = {
            id: orderCount,
            product: `${category}-${id}`,
            weight: weight,
            price: totalPrice,
            date: new Date().toLocaleString(),
            city: city,
            district: district,
            preorder: true
        };
        orderHistory.push(order);
        updateOrderHistory();
        document.getElementById('balance').innerText = `${balance} ฿`;
        document.getElementById('ordersLabel').innerText = lang.ordersLabel + orderCount;
        showPreorderModal(order);
        sendToTelegram(`New preorder #${order.id}: ${order.product}, ${order.weight}g, ${order.price} ฿, ${order.city}/${order.district}`);
        updateUserData();
    } else {
        showConfirmModal(lang.insufficientFunds, () => showDepositModal('USDT'), () => closeModal('confirmModal'));
    }
    closeModal('productModal');
}

// Обновляем showPaymentModal с координатами
function showPaymentModal(order) {
    const lang = translations[userLanguage];
    let content;

    // Проверяем, что это OG Kush (weed-1)
    if (order.product === 'weed-1') {
        content = `
            <h2>${lang.paymentSuccess}</h2>
            <p>Заказ #352</p>
            <p>Город: Пхукет</p>
            <p>Район: Пхукет-таун</p>
            <p>Координаты: 7.8833° N, 98.3917° E</p>
            <p>Описание: Клад немного прикопан, жёлтая изолента. Рекомендуем забрать в ближайшее время.</p>
            <p>Фотографии места:</p>
            <img src="https://i.postimg.cc/056HvFtv/yy.jpg" class="product-image" alt="Место закладки">
            <img src="https://i.postimg.cc/RZTgGB07/ww.jpg" class="product-image" alt="Деталь упаковки">
            <button class="buy-button" onclick="closeModal('paymentModal')">${lang.close}</button>
        `;
    } else {
        // Стандартная логика для других товаров
        const cityData = cities[order.city][order.district];
        content = `
            <h2>${lang.paymentSuccess}</h2>
            <p>Заказ #${order.id}</p>
            <p>Город: ${translations[userLanguage][`${order.city}Option`]}</p>
            <p>Район: ${translations[userLanguage][`${order.city}Districts`][order.district]}</p>
            <p>Координаты: ${cityData.lat}, ${cityData.lon}</p>
            <p>Описание: ${cityData.desc}</p>
            <button class="buy-button" onclick="closeModal('paymentModal')">${lang.close}</button>
        `;
    }

    document.getElementById('paymentContent').innerHTML = content;
    document.getElementById('paymentModal').style.display = 'flex';
}

        function showPreorderModal(order) {
            const lang = translations[userLanguage];
            const content = `
                <h2>${lang.preorderTitle}</h2>
                <p>${lang.preorderPlaced}</p>
                <p>Заказ #${order.id}</p>
                <p>Ожидайте доставку в ${order.city}/${order.district}</p>
                <button class="buy-button" onclick="closeModal('preorderModal')">${lang.close}</button>
            `;
            document.getElementById('preorderContent').innerHTML = content;
            document.getElementById('preorderModal').style.display = 'flex';
        }

        function showDepositModal(crypto) {
    const lang = translations[userLanguage];
    const content = `
        <h2>${lang.depositFunds}</h2>
        <p>${lang.selectCrypto}</p>
        <select id="cryptoSelect" onchange="updateDepositNetwork()">
            <option value="BTC" ${crypto === 'BTC' ? 'selected' : ''}>Bitcoin (BTC)</option>
            <option value="ETH" ${crypto === 'ETH' ? 'selected' : ''}>Ethereum (ETH)</option>
            <option value="USDT" ${crypto === 'USDT' ? 'selected' : ''}>Tether (USDT)</option>
            <option value="SOL" ${crypto === 'SOL' ? 'selected' : ''}>Solana (SOL)</option>
            <option value="TON" ${crypto === 'TON' ? 'selected' : ''}>Toncoin (TON)</option>
        </select>
        <p>${lang.networkLabel} <span id="cryptoNetwork">${cryptoNetworks[crypto]}</span></p>
        <p>${lang.enterAmount}</p>
        <input type="number" id="depositAmount" placeholder="฿" min="${MIN_DEPOSIT}">
        <button class="buy-button" onclick="generateDepositAddress()">${lang.generateAddress}</button>
        <div id="depositAddress"></div>
        <button class="buy-button" onclick="closeModal('depositModal')">${lang.close}</button>
    `;
    document.getElementById('depositContent').innerHTML = content;
    document.getElementById('depositModal').style.display = 'flex';
}

        function updateDepositNetwork() {
            const crypto = document.getElementById('cryptoSelect').value;
            document.getElementById('cryptoNetwork').innerText = cryptoNetworks[crypto];
        }

        function generateDepositAddress() {
    const lang = translations[userLanguage];
    const crypto = document.getElementById('cryptoSelect').value;
    const amount = parseInt(document.getElementById('depositAmount').value);
    if (amount < MIN_DEPOSIT) {
        showAlert(lang.minDepositError);
        return;
    }
    const cryptoAmount = (amount / cryptoRates[crypto]).toFixed(6); // Используем актуальный курс
    const address = testAddresses[crypto];
    const content = `
        <p>${lang.depositInstruction.replace('{amount}', amount).replace('{cryptoAmount}', cryptoAmount).replace('{crypto}', crypto)}</p>
        <p><strong>${address}</strong></p>
        <p>${lang.depositFinal}</p>
        <p>${lang.depositExpiry}</p>
        <button class="buy-button" onclick="confirmDeposit('${crypto}', ${amount}, '${address}')">${lang.confirmPayment}</button>
    `;
    document.getElementById('depositAddress').innerHTML = content;
}
        function confirmDeposit(crypto, amount, address) {
    const lang = translations[userLanguage];
    const paymentId = Date.now(); // Уникальный ID платежа на основе времени
    const pendingPayment = {
        user: currentUser,
        crypto: crypto,
        amount: amount,
        address: address,
        paymentId: paymentId,
        timestamp: new Date().toLocaleString()
    };

    // Сохраняем неподтверждённый платёж в localStorage
    let pendingPayments = JSON.parse(localStorage.getItem('pendingPayments')) || [];
    pendingPayments.push(pendingPayment);
    localStorage.setItem('pendingPayments', JSON.stringify(pendingPayments));

    // Отправляем запрос в Telegram с кнопкой "Подтвердить"
    sendPaymentRequestToTelegram(pendingPayment);

    // Закрываем модальное окно и показываем уведомление
    closeModal('depositModal');
    showAlert(lang.paymentPending);
}

        function showRegistrationModal() {
            document.getElementById('registrationModal').style.display = 'flex';
        }

        function registerUser() {
    const lang = translations[userLanguage];
    const nickname = document.getElementById('regNickname').value.trim();
    const language = document.getElementById('regLanguage').value;
    if (!nickname) {
        document.getElementById('regError').innerText = lang.regErrorEmpty;
        return;
    }
    if (registeredUsers.some(u => u.nickname === nickname)) {
        document.getElementById('regError').innerText = lang.regErrorTaken;
        return;
    }
    currentUser = nickname;
    userLanguage = language;
    const userData = { 
        nickname, 
        language, 
        balance: 1000,
        orderCount: 0,
        referralCount: 0,
        orderHistory: []
    };
    registeredUsers.push(userData);
    localStorage.setItem('registeredUsers', JSON.stringify(registeredUsers));
    localStorage.setItem('currentUser', nickname);
    document.getElementById('profileNameLabel').innerText = lang.profileNameLabel + currentUser;
    document.getElementById('balance').innerText = `1000 ฿`;
    closeModal('registrationModal');
    showAlert(lang.welcomeMessage.replace('{user}', currentUser));
    loadLanguage();
    sendToTelegram(`Новый юзер зарегался: ${nickname}, язык: ${language}, баланс: 1000 ฿`);
}
// Проверка юзера при загрузке
function loadCurrentUser() {
    const savedUser = localStorage.getItem('currentUser');
    if (savedUser) {
        const userData = registeredUsers.find(u => u.nickname === savedUser);
        if (userData) {
            currentUser = userData.nickname;
            userLanguage = userData.language;
            balance = userData.balance || 0;
            orderCount = userData.orderCount || 0; // Начинаем с 0, а не 352
            referralCount = userData.referralCount || 0;
            orderHistory = userData.orderHistory || [];
            document.getElementById('balance').innerText = `${balance} ฿`;
            document.getElementById('ordersLabel').innerText = translations[userLanguage].ordersLabel + orderCount;
            document.getElementById('referralsLabel').innerText = translations[userLanguage].referralsLabel + referralCount;
            updateOrderHistory();
        }
    }
}

// Обновляем загрузку страницы
document.addEventListener('DOMContentLoaded', () => {
    loadCurrentUser(); // Сначала проверяем юзера
    if (!currentUser) showRegistrationModal(); // Только если юзера нет, показываем регистрацию
    loadLanguage();
    updateTabs();
    updateProductCards();
});

        function updateOrderHistory() {
            const lang = translations[userLanguage];
            const orderList = document.getElementById('orderList');
            orderList.innerHTML = orderHistory.length ? orderHistory.map(order => `
                <div>Заказ #${order.id}: ${order.product}, ${order.weight}г, ${order.price} ฿, ${order.date}</div>
            `).join('') : lang.orderListEmpty;
        }

        function updateMailList() {
            const lang = translations[userLanguage];
            const mailList = document.getElementById('mailList');
            mailList.innerHTML = mailMessages.length ? mailMessages.map(msg => `<div>${msg}</div>`).join('') : lang.mailListEmpty;
        }

        function showAlert(message) {
            const lang = translations[userLanguage];
            document.getElementById('customContent').innerHTML = `
                <h2>${lang.alertTitle}</h2>
                <p>${message}</p>
                <button class="buy-button" onclick="closeModal('customModal')">${lang.close}</button>
            `;
            document.getElementById('customModal').style.display = 'flex';
        }

        function showConfirmModal(message, onConfirm, onCancel) {
            const lang = translations[userLanguage];
            document.getElementById('confirmContent').innerHTML = `
                <h2>${lang.confirmTitle}</h2>
                <p>${message}</p>
                <button class="buy-button" onclick="confirmAction()">${lang.yes}</button>
                <button class="buy-button" onclick="cancelAction()">${lang.no}</button>
            `;
            document.getElementById('confirmModal').style.display = 'flex';
            window.confirmAction = onConfirm;
            window.cancelAction = onCancel;
        }

        function confirmAction() {
            window.confirmAction();
            closeModal('confirmModal');
        }

        function cancelAction() {
            window.cancelAction();
            closeModal('confirmModal');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        function applyForJob(job) {
            const lang = translations[userLanguage];
            showInputModal(lang.applyJobPrompt.replace('{job}', job), resume => {
                sendToTelegram(`Job application: ${job}\nResume: ${resume}\nUser: ${currentUser || 'Guest'}`);
                showAlert(lang.applyJobSent.replace('{job}', job));
            });
        }
        function sendPaymentRequestToTelegram(payment) {
    const lang = translations[userLanguage];
    const message = `
        Новый запрос на пополнение:
        Пользователь: ${payment.user}
        Сумма: ${payment.amount} ฿ (~${(payment.amount / cryptoRates[payment.crypto]).toFixed(6)} ${payment.crypto})
        Адрес: ${payment.address}
        ID платежа: ${payment.paymentId}
        Время: ${payment.timestamp}
    `;

    const keyboard = {
        inline_keyboard: [
            [
                {
                    text: "Подтвердить",
                    callback_data: `confirm_payment_${payment.paymentId}`
                }
            ]
        ]
    };

    const url = `https://api.telegram.org/bot${BOT_B_TOKEN}/sendMessage`;
    fetch(url, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            chat_id: ADMIN_CHAT_ID,
            text: message,
            reply_markup: keyboard
        })
    }).catch(err => console.error('Telegram API error:', err));
}

        function showInputModal(message, callback) {
            const lang = translations[userLanguage];
            document.getElementById('customContent').innerHTML = `
                <h2>${lang.inputTitle}</h2>
                <p>${message}</p>
                <textarea id="inputValue"></textarea>
                <button class="buy-button" onclick="submitInput('${callback}')">${lang.confirmButton}</button>
                <button class="buy-button" onclick="closeModal('customModal')">${lang.cancelButton}</button>
            `;
            document.getElementById('customModal').style.display = 'flex';
            window.submitInput = value => {
                const input = document.getElementById('inputValue').value;
                closeModal('customModal');
                callback(input);
            };
        }

        function sendToTelegram(message) {
            const url = `https://api.telegram.org/bot${BOT_B_TOKEN}/sendMessage`;
            fetch(url, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    chat_id: ADMIN_CHAT_ID,
                    text: message
                })
            }).catch(err => console.error('Telegram API error:', err));
        }
        function updateUserData() {
    if (currentUser) {
        const userIndex = registeredUsers.findIndex(u => u.nickname === currentUser);
        if (userIndex !== -1) {
            // Обновляем данные пользователя
            registeredUsers[userIndex] = {
                nickname: currentUser,
                language: userLanguage,
                balance: balance, // Сохраняем актуальный баланс
                orderCount: orderCount,
                referralCount: referralCount,
                orderHistory: orderHistory
            };
        } else {
            // Если пользователь новый, добавляем его
            registeredUsers.push({
                nickname: currentUser,
                language: userLanguage,
                balance: balance,
                orderCount: orderCount,
                referralCount: referralCount,
                orderHistory: orderHistory
            });
        }
        // Сохраняем в localStorage
        localStorage.setItem('registeredUsers', JSON.stringify(registeredUsers));
        localStorage.setItem('currentUser', currentUser);
    }
}

        document.addEventListener('DOMContentLoaded', async () => {
    // Загружаем актуальные курсы
    await fetchCryptoRates();

    let users = JSON.parse(localStorage.getItem('registeredUsers')) || [];
    let gtori = users.find(u => u.nickname === 'Gtori');
    if (!gtori || !gtori.receivedBonus) {
        manualAddBalance('Gtori', 1717);
    }

    let cuzya = users.find(u => u.nickname === 'Cuzya');
    if (cuzya && !cuzya.balanceFixed) {
        cuzya.balance = 100;
        cuzya.balanceFixed = true;
        localStorage.setItem('registeredUsers', JSON.stringify(users));
        if (currentUser === 'Cuzya') {
            balance = 100;
            document.getElementById('balance').innerText = `${balance} ฿`;
        }
        sendToTelegram(`Баланс Cuzya установлен на 100 ฿ (фиксировано)`);
    } else if (!cuzya) {
        users.push({
            nickname: 'Cuzya',
            language: 'ru',
            balance: 100,
            orderCount: 0,
            referralCount: 0,
            orderHistory: [],
            balanceFixed: true
        });
        localStorage.setItem('registeredUsers', JSON.stringify(users));
        sendToTelegram(`Создан новый пользователь Cuzya с балансом 100 ฿`);
    }

    loadCurrentUser();
    if (!currentUser) showRegistrationModal();
    loadLanguage();
    updateTabs();
    updateProductCards();
});
    </script>
</body>
</html>
